<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Refcard SQL</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Fabrice Niessen" />
<meta name="keywords" content="sql, emacs, yasnippet, snippets, code templates" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/readtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/readtheorg/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/lib/js/jquery.stickytableheaders.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/readtheorg/js/readtheorg.js"></script>
</head>
<body>
<div id="content">
<h1 class="title">Refcard SQL</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org7c2b73e">Sqsh</a></li>
<li><a href="#orgfc5a3a2">Mssql-cli</a>
<ul>
<li><a href="#org3520fcb">Features</a></li>
<li><a href="#org642cd97">Setup</a></li>
</ul>
</li>
<li><a href="#orge42a880">Emacs YASnippets</a>
<ul>
<li><a href="#org2271486">Insert Snippet&#x2026;</a>
<ul>
<li><a href="#org01ba7ba">Cursor</a></li>
<li><a href="#org7bb2bfc">Database</a></li>
<li><a href="#orge573565">Fragment</a></li>
<li><a href="#org740d258">Function</a></li>
<li><a href="#orge65c07f">Index</a></li>
<li><a href="#org9609641">Join fragment</a></li>
<li><a href="#org8415299">Login</a></li>
<li><a href="#orgfd75701">Role</a></li>
<li><a href="#org547a0f9">Schema</a></li>
<li><a href="#org229a85b">Set options</a></li>
<li><a href="#orgef78d4f">Stored Procedure</a></li>
<li><a href="#org37734ee">Synonym</a></li>
<li><a href="#org27b1519">Table</a></li>
<li><a href="#org8cf61be">Transaction</a></li>
<li><a href="#orgbcdc36b">Trigger</a></li>
<li><a href="#org08b0d0f">User</a></li>
<li><a href="#orgdd98060">User Defined Data Type</a></li>
<li><a href="#orgbf27cae">User Defined Table Type</a></li>
<li><a href="#org44ea0a9">User Defined Type</a></li>
<li><a href="#org3d16a7e">View</a></li>
<li><a href="#org499d309">&#x2014; Miscellaneous ---</a></li>
</ul>
</li>
<li><a href="#org281e744">Surround With&#x2026;</a>
<ul>
<li><a href="#orga60f91f">[begin] Code Snippet for BEGIN&#x2026;END block</a></li>
<li><a href="#orgc43c288">[if] Code Snippet for IF construct</a></li>
<li><a href="#org30313f8">[while] Code Snippet for WHILE loop</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org7c2b73e" class="outline-2">
<h2 id="org7c2b73e">Sqsh</h2>
<div class="outline-text-2" id="text-org7c2b73e">
<div class="org-src-container">
<pre class="src src-conf"><span class="org-comment-delimiter"># </span><span class="org-comment">Hey Emacs, this is a -*- conf -*- file</span>
<span class="org-comment-delimiter">## </span><span class="org-comment">.sqshrc - My sqsh initialization file</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (C) 2013-&lt;&lt;current-year()&gt;&gt; Fabrice Niessen</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Fabrice Niessen &lt;(concat "fni" at-symbol "pirilampo.org")&gt;</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Keywords: sqsh, dotfile, config</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">* Connections</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Setting your password within your `.sqshrc' is probably the most secure method</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">of using sqsh.  However, make sure that you `chmod go-rwx ~/.sqshrc',</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">otherwise you leave yourself wide open to attacks.</span>

<span class="org-variable-name">\set username</span>=<span class="org-string">"sa"</span>
<span class="org-variable-name">\set password</span>=<span class="org-string">"mysecret"</span>
<span class="org-variable-name">\set hostname</span>=<span class="org-string">"localhost"</span>
<span class="org-variable-name">\set database</span>=[ARCHIBUS_23_2_HQ]

<span class="org-comment-delimiter">#</span><span class="org-comment">* Aliasing</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">** Display styles</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">\set colsep='| '</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Currently supported styles are:</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">- horiz (or hor or horizontal) (*) = default</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">- vert (or vertical) (*),</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">- bcp,</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">- csv,</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">- html,</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">- meta,</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">- pretty (*), and</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">- none.</span>

<span class="org-variable-name">\alias goh</span>=<span class="org-string">'\go -m horiz | ${PAGER}'</span>

<span class="org-variable-name">\alias gov</span>=<span class="org-string">'\go -m vert | ${PAGER}'</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">*Very* useful for doing quick bcp commands from command line, and using</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">re-direction directly to a file!</span>
<span class="org-variable-name">\alias gob</span>=<span class="org-string">'\go -m bcp | ${PAGER}'</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Firefox.</span>
<span class="org-variable-name">\alias gof</span>=<span class="org-string">'\go -m html | (cat &gt; /tmp/sqsh-output.html; /mnt/c/Windows/explorer.exe file:///tmp/sqsh-output.html)'</span>

<span class="org-variable-name">\alias gom</span>=<span class="org-string">'\go -m meta | ${PAGER}'</span>

<span class="org-variable-name">\alias gop</span>=<span class="org-string">'\go -m pretty -w80 | ${PAGER}'</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">** Aliases for T-SQL commands</span>

<span class="org-variable-name">\alias statson</span>=<span class="org-string">'\loop -e "SET STATISTICS IO ON; SET STATISTICS TIME ON"'</span>
<span class="org-variable-name">\alias statsoff</span>=<span class="org-string">'\loop -e "SET STATISTICS IO OFF; SET STATISTICS TIME OFF"'</span>

<span class="org-variable-name">\alias planon</span>=<span class="org-string">'\loop -e "SET SHOWPLAN ON"'</span>
<span class="org-variable-name">\alias planoff</span>=<span class="org-string">'\loop -e "SET SHOWPLAN OFF"'</span>

<span class="org-variable-name">\alias ton</span>=<span class="org-string">'\loop -e "DBCC TRACEON(3604)"'</span>
<span class="org-variable-name">\alias toff</span>=<span class="org-string">'\loop -e "DBCC TRACEOFF(3604)"'</span>

<span class="org-variable-name">\alias tempdb</span>=<span class="org-string">'\loop -e "USE tempdb"'</span>
<span class="org-variable-name">\alias master</span>=<span class="org-string">'\loop -e "USE master"'</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">** Aliases for sqsh commands</span>

<span class="org-variable-name">\alias DEV</span>=<span class="org-string">'\reconnect -SDEV -Usa -Pmysecret'</span>
<span class="org-variable-name">\alias STG</span>=<span class="org-string">'\reconnect -SSTG -Usa -Pmysecret'</span>
<span class="org-variable-name">\alias PRD</span>=<span class="org-string">'\reconnect -c -SPRD -Usa -Pmysecret'</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Clear screen within sqsh session.</span>
<span class="org-variable-name">\alias clear</span>=<span class="org-string">"\shell clear"</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Read a file into sqsh session.</span>
<span class="org-variable-name">\alias :r</span>=<span class="org-string">'\buf-load -a !*'</span>
<span class="org-variable-name">\alias r</span>=<span class="org-string">"\buf-load "</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Drop you into a shell out of sqsh.</span>
<span class="org-variable-name">\alias sh</span>=<span class="org-string">"\shell "</span>

<span class="org-variable-name">\alias h</span>=<span class="org-string">"\history"</span>

<span class="org-variable-name">\alias xx</span>=<span class="org-string">'\reset'</span>

<span class="org-variable-name">\alias q</span>=<span class="org-string">"\exit"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">* Miscellaneous</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Turn off the sqsh banner; cosmetic only</span>
<span class="org-variable-name">\set banner</span>=no

<span class="org-variable-name">\set width</span>=65535

<span class="org-comment-delimiter"># </span><span class="org-comment">Have semicolons executing commands (sort of inline "go")...</span>
<span class="org-variable-name">\set semicolon_hack</span>=on

<span class="org-comment-delimiter"># </span><span class="org-comment">Turn on ability to have !-recall commands.</span>
<span class="org-variable-name">\set history_shorthand</span>=on

<span class="org-comment-delimiter"># </span><span class="org-comment">This variable causes sqsh to exit with an exit status of the total number of</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">batches that failed during the current session.  This is useful for use within</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">shell scripts and the such.</span>
<span class="org-variable-name">\set exit_failcount</span>=on

<span class="org-variable-name">\set prompt_color</span>=<span class="org-string">'{0;34;47}'</span>
<span class="org-variable-name">\set text_color</span>=<span class="org-string">'{0;33}'</span>
<span class="org-variable-name">\set prompt</span>=<span class="org-string">'$prompt_color{{$username@$DSQUERY:$database}}&gt;$text_color '</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">This is for the sake of Emacs.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Local Variables&#58;</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">mode: outline-minor</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">End:</span>

<span class="org-comment-delimiter">## </span><span class="org-comment">.sqshrc ends here</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfc5a3a2" class="outline-2">
<h2 id="orgfc5a3a2">Mssql-cli</h2>
<div class="outline-text-2" id="text-orgfc5a3a2">
</div>
<div id="outline-container-org3520fcb" class="outline-3">
<h3 id="org3520fcb">Features</h3>
<div class="outline-text-3" id="text-org3520fcb">
<p>
New and interactive command line query tool for SQL Server. This open source
tool works cross-platform and is a proud member of the dbcli community.
</p>

<p>
Features
</p>
<ul class="org-ul">
<li>Mssql-cli auto-completion that is context aware</li>
<li>T-SQL IntelliSense</li>
<li>Syntax highlighting</li>
<li>Pretty formatting for query results, including Vertical Format</li>
<li>Multi-line edit mode</li>
<li>Configuration file support</li>
</ul>

<p>
<a href="https://cloudblogs.microsoft.com/sqlserver/2017/12/12/try-mssql-cli-a-new-interactive-command-line-tool-for-sql-server/">https://cloudblogs.microsoft.com/sqlserver/2017/12/12/try-mssql-cli-a-new-interactive-command-line-tool-for-sql-server/</a>
</p>
</div>
</div>

<div id="outline-container-org642cd97" class="outline-3">
<h3 id="org642cd97">Setup</h3>
<div class="outline-text-3" id="text-org642cd97">
<div class="org-src-container">
<pre class="src src-shell">sudo apt install python-pip python-dev
sudo pip install --upgrade pip
sudo pip install mssql-cli
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell">mssql-cli -E
kinit.exe user@domain.com
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orge42a880" class="outline-2">
<h2 id="orge42a880">Emacs YASnippets</h2>
<div class="outline-text-2" id="text-orge42a880">
<p>
A <b>SQL snippet</b> is a frequently used <b>code template</b> which can be inserted into
a code you are typing by pressing the TAB key.
</p>

<p>
Snippets are categorized into 2 types:
</p>

<ul class="org-ul">
<li><b>Insert Snippets (or Expansion Snippets)</b>: These are code templates for various
SQL commands you can quickly insert into your SQL code when creating tables,
stored procedures, triggers and so on.</li>

<li><b>Surround Snippets:</b> These are code templates that help you implement code
constructs such as <code>BEGIN...END</code>, <code>IF</code>, <code>WHILE</code> and so on.</li>
</ul>
</div>

<div id="outline-container-org2271486" class="outline-3">
<h3 id="org2271486">Insert Snippet&#x2026;</h3>
<div class="outline-text-3" id="text-org2271486">
</div>
<div id="outline-container-org01ba7ba" class="outline-4">
<h4 id="org01ba7ba">Cursor</h4>
<div class="outline-text-4" id="text-org01ba7ba">
</div>
<div id="outline-container-orga31ca2f" class="outline-5">
<h5 id="orga31ca2f">[curff] Cursor Fast-Forward</h5>
<div class="outline-text-5" id="text-orga31ca2f">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: Fast-forward <span class="org-keyword">read</span>-<span class="org-keyword">on</span>...
# <span class="org-comment">--</span>
<span class="org-comment-delimiter">/* </span><span class="org-comment">declare variables */</span>
<span class="org-keyword">DECLARE</span> <span class="org-variable-name">@variable</span> <span class="org-type">INT</span>

<span class="org-keyword">DECLARE</span> ${1:<span class="org-keyword">cursor_name</span>} <span class="org-type">CURSOR</span>
FAST_FORWARD READ_ONLY
<span class="org-keyword">FOR</span> ${2:select_statement}

<span class="org-keyword">OPEN</span> $1

<span class="org-keyword">FETCH</span> <span class="org-keyword">NEXT</span> <span class="org-keyword">FROM</span> $1
<span class="org-keyword">INTO</span> <span class="org-variable-name">@variable</span>

<span class="org-keyword">WHILE</span> <span class="org-builtin">@@FETCH_STATUS</span> = 0
<span class="org-keyword">BEGIN</span>
    $0

    <span class="org-keyword">FETCH</span> <span class="org-keyword">NEXT</span> <span class="org-keyword">FROM</span> $1
    <span class="org-keyword">INTO</span> <span class="org-variable-name">@variable</span>
<span class="org-keyword">END</span>

<span class="org-keyword">CLOSE</span> $1
<span class="org-keyword">DEALLOCATE</span> $1
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org7bb2bfc" class="outline-4">
<h4 id="org7bb2bfc">Database</h4>
<div class="outline-text-4" id="text-org7bb2bfc">
</div>
<div id="outline-container-orgf5b0c97" class="outline-5">
<h5 id="orgf5b0c97">[cdb] Create DataBase</h5>
<div class="outline-text-5" id="text-orgf5b0c97">
<p>
Create database.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Create</span> <span class="org-keyword">database</span>
# <span class="org-comment">--</span>
<span class="org-doc">USE master</span>
<span class="org-doc">go</span>

<span class="org-comment">-- Drop the database if it already exists</span>
<span class="org-keyword">IF</span> <span class="org-keyword">EXISTS</span> (<span class="org-keyword">SELECT</span> <span class="org-keyword">name</span>
        <span class="org-keyword">FROM</span> sys.databases
        <span class="org-keyword">WHERE</span> <span class="org-keyword">name</span> = N<span class="org-string">'${1:database_name}'</span>)
    <span class="org-keyword">DROP</span> <span class="org-keyword">DATABASE</span> $1
<span class="org-doc">go</span>

<span class="org-keyword">CREATE</span> <span class="org-keyword">DATABASE</span> $1
<span class="org-keyword">ON</span>
<span class="org-keyword">PRIMARY</span> ( <span class="org-comment">-- or use FILEGROUP filegroup_name</span>
  <span class="org-keyword">NAME</span> = $1_data,
  FILENAME = <span class="org-string">'$1.mdf'</span>
) <span class="org-comment">--, and repeat as required</span>
<span class="org-builtin">LOG</span> <span class="org-keyword">ON</span>
(
  <span class="org-keyword">NAME</span> = $1_log,
  FILENAME = <span class="org-string">'$1.ldf'</span>
) <span class="org-comment">--, and repeat as required</span>
<span class="org-comment">--COLLATE collation_name</span>
<span class="org-comment">--WITH</span>
<span class="org-comment">--  DB_CHAINING ON/OFF</span>
<span class="org-comment">--  TRUSTWORTHY ON/OFF</span>
<span class="org-comment">--FOR LOAD</span>
<span class="org-comment">--FOR ATTACH</span>
<span class="org-comment">--WITH</span>
<span class="org-comment">--  ENABLE_BROKER</span>
<span class="org-comment">--  NEW_BROKER</span>
<span class="org-comment">--  ERROR_BROKER_CONVERSATIONS</span>
<span class="org-comment">--FOR ATTACH_REBUILD_LOG</span>
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org428a226" class="outline-5">
<h5 id="org428a226">[cdbsnap] Create DataBase Snapshot</h5>
<div class="outline-text-5" id="text-org428a226">
<p>
Create snapshot.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Create</span> <span class="org-keyword">database</span> sna...
# <span class="org-comment">--</span>
<span class="org-doc">USE master</span>
<span class="org-doc">go</span>

<span class="org-comment">-- Drop snapshot database if it already exists</span>
<span class="org-keyword">IF</span> <span class="org-keyword">EXISTS</span> (<span class="org-keyword">SELECT</span> <span class="org-keyword">name</span>
        <span class="org-keyword">FROM</span> sys.databases
        <span class="org-keyword">WHERE</span> <span class="org-keyword">name</span> = N<span class="org-string">'${1:source_database}_${2:snapshot_id}'</span>)
    <span class="org-keyword">DROP</span> <span class="org-keyword">DATABASE</span> $1_$2
<span class="org-doc">go</span>

<span class="org-comment">-- Create the snapshot database</span>
<span class="org-keyword">CREATE</span> <span class="org-keyword">DATABASE</span> $1_$2 <span class="org-keyword">ON</span>
( <span class="org-keyword">NAME</span> = $1_$2_data,
  FILENAME = <span class="org-string">'$1_$2.ss'</span>)
<span class="org-keyword">AS</span> SNAPSHOT <span class="org-keyword">OF</span> $1;
<span class="org-doc">go$0</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1c18fc6" class="outline-5">
<h5 id="org1c18fc6">[dd] Drop Database</h5>
<div class="outline-text-5" id="text-org1c18fc6">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Drop</span> <span class="org-keyword">database</span>
# <span class="org-comment">--</span>
<span class="org-doc">USE master</span>
<span class="org-doc">go</span>

<span class="org-comment">-- Drop the database if it already exists</span>
<span class="org-keyword">IF</span> <span class="org-keyword">EXISTS</span> (<span class="org-keyword">SELECT</span> <span class="org-keyword">name</span>
        <span class="org-keyword">FROM</span> sys.databases
        <span class="org-keyword">WHERE</span> <span class="org-keyword">name</span> = N<span class="org-string">'${1:database_name}'</span>)
    <span class="org-keyword">DROP</span> <span class="org-keyword">DATABASE</span> $1
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org0ff9989" class="outline-5">
<h5 id="org0ff9989">Database Backup</h5>
<div class="outline-text-5" id="text-org0ff9989">
<p>
Backup database.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Backup</span> <span class="org-keyword">database</span>
# <span class="org-comment">--</span>
<span class="org-keyword">BACKUP</span> <span class="org-keyword">DATABASE</span> ${1:database_name}
    <span class="org-keyword">TO</span> <span class="org-keyword">DISK</span> = N<span class="org-string">'Backup_Path/$1.bak'</span>
<span class="org-keyword">WITH</span>
    NOFORMAT,
    NOINIT,
    <span class="org-keyword">NAME</span> = N<span class="org-string">'$1-Full Database Backup'</span>,
    SKIP,
    STATS = 10;
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org799e9f8" class="outline-5">
<h5 id="org799e9f8">Database Restore</h5>
<div class="outline-text-5" id="text-org799e9f8">
<p>
Restore database.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Restore</span> <span class="org-keyword">database</span>
# <span class="org-comment">--</span>
<span class="org-doc">USE master</span>
<span class="org-doc">go</span>

<span class="org-keyword">RESTORE</span> <span class="org-keyword">DATABASE</span> ${1:database_name}
    <span class="org-keyword">FROM</span> <span class="org-keyword">DISK</span> = N<span class="org-string">'Backup_Path/$1.bak'</span>
<span class="org-keyword">WITH</span>
    <span class="org-keyword">FILE</span> = 1,
    NOUNLOAD,
    <span class="org-builtin">REPLACE</span>,
    STATS = 10
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orge573565" class="outline-4">
<h4 id="orge573565">Fragment</h4>
<div class="outline-text-4" id="text-orge573565">
</div>
<div id="outline-container-org5933ca3" class="outline-5">
<h5 id="org5933ca3">[ii] Insert Into</h5>
<div class="outline-text-5" id="text-org5933ca3">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">INSERT</span> <span class="org-keyword">INTO</span> fragment
# <span class="org-comment">--</span>
<span class="org-keyword">INSERT</span> <span class="org-keyword">INTO</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-orgae49c12" class="outline-5">
<h5 id="orgae49c12">[ssf] Select Star From</h5>
<div class="outline-text-5" id="text-orgae49c12">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">SELECT</span> * <span class="org-keyword">FROM</span> frag...
# <span class="org-comment">--</span>
<span class="org-keyword">SELECT</span> * <span class="org-keyword">FROM</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-org4cd9f29" class="outline-5">
<h5 id="org4cd9f29">[st100] Select Top 100</h5>
<div class="outline-text-5" id="text-org4cd9f29">
<p>
Select top 100 rows.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">SELECT</span> <span class="org-keyword">top</span> 100 <span class="org-keyword">rows</span>
# <span class="org-comment">--</span>
<span class="org-keyword">SELECT</span> <span class="org-keyword">TOP</span> 100 *
<span class="org-keyword">FROM</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-org0ffd733" class="outline-5">
<h5 id="org0ffd733">[scf] Select Count From</h5>
<div class="outline-text-5" id="text-org0ffd733">
<p>
Count number of records returned by query.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Count</span> <span class="org-keyword">number</span> <span class="org-keyword">of</span> rec...
# <span class="org-comment">--</span>
<span class="org-keyword">SELECT</span> <span class="org-keyword">COUNT</span>(*) <span class="org-keyword">FROM</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-orge2b8db3" class="outline-5">
<h5 id="orge2b8db3">[is] INFORMATION_SCHEMA</h5>
<div class="outline-text-5" id="text-orge2b8db3">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: INFORMATION_SCH...
# <span class="org-comment">--</span>
INFORMATION_SCHEMA$0
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc6a9248" class="outline-5">
<h5 id="orgc6a9248">[gb] Group By</h5>
<div class="outline-text-5" id="text-orgc6a9248">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">GROUP</span> <span class="org-keyword">BY</span> fragment
# <span class="org-comment">--</span>
<span class="org-keyword">GROUP</span> <span class="org-keyword">BY</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-orgac15006" class="outline-5">
<h5 id="orgac15006">[ob] Order By</h5>
<div class="outline-text-5" id="text-orgac15006">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">ORDER</span> <span class="org-keyword">BY</span> fragment
# <span class="org-comment">--</span>
<span class="org-keyword">ORDER</span> <span class="org-keyword">BY</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-org9b90801" class="outline-5">
<h5 id="org9b90801">[df] Delete From</h5>
<div class="outline-text-5" id="text-org9b90801">
<p>
Delete statement.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">DELETE</span> <span class="org-keyword">FROM</span> frag...
# <span class="org-comment">--</span>
<span class="org-keyword">DELETE</span> <span class="org-keyword">FROM</span> ${1:[<span class="org-keyword">schema</span>].[<span class="org-keyword">table_name</span>]}
<span class="org-keyword">WHERE</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-orga3727a3" class="outline-5">
<h5 id="orga3727a3">[be] Begin&#x2026;End</h5>
<div class="outline-text-5" id="text-orga3727a3">
<p>
Insert <code>BEGIN...END</code> block.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">BEGIN</span>...<span class="org-keyword">END</span> block
# <span class="org-comment">--</span>
<span class="org-keyword">BEGIN</span>
    $0
<span class="org-keyword">END</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org117dd5a" class="outline-5">
<h5 id="org117dd5a">[tc] Try &#x2026; Catch</h5>
<div class="outline-text-5" id="text-org117dd5a">
<p>
Insert <code>TRY...CATCH</code> block.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: TRY ... CATCH fragm...
# <span class="org-comment">--</span>
<span class="org-keyword">BEGIN</span> TRY
    $0
<span class="org-keyword">END</span> TRY
<span class="org-keyword">BEGIN</span> CATCH
    <span class="org-comment-delimiter">/*</span>
<span class="org-comment">        SELECT</span>
<span class="org-comment">            ERROR_NUMBER() AS ErrorNumber,</span>
<span class="org-comment">            ERROR_SEVERITY() AS ErrorSeverity,</span>
<span class="org-comment">            ERROR_STATE() AS ErrorState,</span>
<span class="org-comment">            ERROR_PROCEDURE() AS ErrorProcedure,</span>
<span class="org-comment">            ERROR_LINE() AS ErrorLine,</span>
<span class="org-comment">            ERROR_MESSAGE() AS ErrorMessage</span>
<span class="org-comment">    */</span>
<span class="org-keyword">END</span> CATCH;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd09a659" class="outline-5">
<h5 id="orgd09a659">[ifs] If</h5>
<div class="outline-text-5" id="text-orgd09a659">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">IF</span> fragment
# <span class="org-comment">--</span>
<span class="org-keyword">IF</span> 1 = 1
<span class="org-keyword">BEGIN</span>
    $0
<span class="org-keyword">END</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5a856ec" class="outline-5">
<h5 id="org5a856ec">If Exists</h5>
<div class="outline-text-5" id="text-org5a856ec">
<p>
Perform an operation if a selected object exists.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: ...
# <span class="org-comment">--</span>
<span class="org-keyword">IF</span> <span class="org-keyword">EXISTS</span>(
 <span class="org-keyword">SELECT</span>
 <span class="org-keyword">FROM</span> ${1:<span class="org-type">object</span>})
 <span class="org-keyword">BEGIN</span>
    $0
 <span class="org-keyword">END</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfb45676" class="outline-5">
<h5 id="orgfb45676">Case</h5>
<div class="outline-text-5" id="text-orgfb45676">
<div class="org-src-container">
<pre class="src src-sql"><span class="org-keyword">CASE</span> <span class="org-comment-delimiter">/*</span><span class="org-comment">expression*/</span>
    <span class="org-keyword">WHEN</span> <span class="org-comment-delimiter">/*</span><span class="org-comment">expression*/</span> <span class="org-keyword">THEN</span> <span class="org-comment-delimiter">/*</span><span class="org-comment">result_expression*/</span>
    <span class="org-keyword">WHEN</span> <span class="org-comment-delimiter">/*</span><span class="org-comment">expression*/</span> <span class="org-keyword">THEN</span> <span class="org-comment-delimiter">/*</span><span class="org-comment">result_expression*/</span>
    <span class="org-keyword">ELSE</span> <span class="org-comment-delimiter">/*</span><span class="org-comment">result_expression*/</span>
<span class="org-keyword">END</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6aa5ca4" class="outline-5">
<h5 id="org6aa5ca4">[cte] Common Table Expression</h5>
<div class="outline-text-5" id="text-org6aa5ca4">
<p>
Temporary inline view.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">WITH</span> cte fragment
# <span class="org-comment">--</span>
<span class="org-keyword">WITH</span> ${1:cte_name} <span class="org-keyword">AS</span>
(
    <span class="org-comment">-- SELECT</span>
    <span class="org-comment">-- FROM</span>
    <span class="org-comment">-- GROUP BY</span>
)
<span class="org-comment">-- Statement that executes the common table expression</span>
<span class="org-keyword">SELECT</span> $0
<span class="org-keyword">FROM</span> $1;
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org740d258" class="outline-4">
<h4 id="org740d258">Function</h4>
<div class="outline-text-4" id="text-org740d258">
<p>
Naming convention: functions are prefixed with <code>ufn</code>.
</p>
</div>

<div id="outline-container-org3ebc13a" class="outline-5">
<h5 id="org3ebc13a">[ctif] Create Inline Table Function</h5>
<div class="outline-text-5" id="text-org3ebc13a">
<p>
Creates an inline table function.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Create</span> inline <span class="org-keyword">table</span>-va...
# <span class="org-comment">--</span>
<span class="org-keyword">IF</span> <span class="org-builtin">OBJECT_ID</span> (N<span class="org-string">'${1:[schema].[inline_function_name]}'</span>, N<span class="org-string">'IF'</span>) <span class="org-keyword">IS</span> <span class="org-keyword">NOT</span> <span class="org-keyword">NULL</span>
    <span class="org-keyword">DROP</span> <span class="org-keyword">FUNCTION</span> $1;
<span class="org-doc">go</span>

<span class="org-comment">-- ================================================</span>
<span class="org-doc">SET ANSI_NULLS ON</span>
<span class="org-doc">go</span>
<span class="org-doc">SET QUOTED_IDENTIFIER ON</span>
<span class="org-doc">go</span>
<span class="org-comment">-- =============================================</span>
<span class="org-comment">-- Author:      /* Author */</span>
<span class="org-comment">-- Create date: /* Create Date */</span>
<span class="org-comment">-- Description: /* Description */</span>
<span class="org-comment">-- =============================================</span>
<span class="org-keyword">CREATE</span> <span class="org-keyword">FUNCTION</span> $1 (<span class="org-variable-name">@</span>${2:<span class="org-keyword">parameter_name</span>} ${3:parameter_data_type})
<span class="org-keyword">RETURNS</span> <span class="org-keyword">TABLE</span>
<span class="org-comment">--WITH ENCRYPTION|SCHEMABINDING, ...</span>
<span class="org-keyword">AS</span>
<span class="org-keyword">RETURN</span>
(
    <span class="org-comment">-- Add the SELECT statement with parameter references here</span>
    <span class="org-keyword">SELECT</span> <span class="org-variable-name">@</span>$2 <span class="org-keyword">AS</span> c1
    $0
);
<span class="org-doc">go</span>

<span class="org-comment">-- =============================================</span>
<span class="org-comment">-- Example to execute function</span>
<span class="org-comment">-- =============================================</span>
<span class="org-keyword">SELECT</span> *
<span class="org-keyword">FROM</span> $1 <span class="org-comment-delimiter">/* </span><span class="org-comment">owner.inline_function_name */</span>
    (<span class="org-comment-delimiter">/* </span><span class="org-comment">value_for_@parameter_name */</span>)
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc2f44e0" class="outline-5">
<h5 id="orgc2f44e0">[ctf] Create Multi-Statement Table Function</h5>
<div class="outline-text-5" id="text-orgc2f44e0">
<p>
Creates a multi-statement table function.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Create</span> multi-stateme...
# <span class="org-comment">--</span>
<span class="org-keyword">IF</span> <span class="org-builtin">OBJECT_ID</span> (N<span class="org-string">'${1:[schema].[table_function_name]}'</span>, N<span class="org-string">'TF'</span>) <span class="org-keyword">IS</span> <span class="org-keyword">NOT</span> <span class="org-keyword">NULL</span>
    <span class="org-keyword">DROP</span> <span class="org-keyword">FUNCTION</span> $1;
<span class="org-doc">go</span>

<span class="org-keyword">CREATE</span> <span class="org-keyword">FUNCTION</span> $1 (<span class="org-variable-name">@</span>{2:<span class="org-keyword">parameter_name</span>} ${3:parameter_data_type})
<span class="org-keyword">RETURNS</span> <span class="org-variable-name">@</span>${4:return_variable_name} <span class="org-keyword">TABLE</span>
(
    <span class="org-comment-delimiter">/* </span><span class="org-comment">table type definition */</span>
    $2 $3
)
<span class="org-comment">--WITH ENCRYPTION|SCHEMABINDING, ...</span>
<span class="org-keyword">AS</span>
<span class="org-keyword">BEGIN</span>
    <span class="org-comment-delimiter">/* </span><span class="org-comment">function body */</span>
    <span class="org-keyword">INSERT</span> <span class="org-variable-name">@</span>$4
    <span class="org-keyword">SELECT</span> 1
    <span class="org-keyword">RETURN</span>
<span class="org-keyword">END</span>;
<span class="org-doc">go</span>

<span class="org-comment">-- =============================================</span>
<span class="org-comment">-- Example to execute function</span>
<span class="org-comment">-- =============================================</span>
<span class="org-keyword">SELECT</span> * <span class="org-keyword">FROM</span> $1 <span class="org-comment-delimiter">/* </span><span class="org-comment">owner.table_function_name */</span>
    (<span class="org-comment-delimiter">/* </span><span class="org-comment">value_for_@parameter_name */</span>)
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga490979" class="outline-5">
<h5 id="orga490979">[csf] Create Scalar Function</h5>
<div class="outline-text-5" id="text-orga490979">
<p>
Creates a scalar function.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Create</span> scalar <span class="org-keyword">function</span>
# <span class="org-comment">--</span>
<span class="org-keyword">IF</span> <span class="org-builtin">OBJECT_ID</span> (N<span class="org-string">'${1:[schema].[scalar_function_name]}'</span>, N<span class="org-string">'FN'</span>) <span class="org-keyword">IS</span> <span class="org-keyword">NOT</span> <span class="org-keyword">NULL</span>
    <span class="org-keyword">DROP</span> <span class="org-keyword">FUNCTION</span> $1;
<span class="org-doc">go</span>

<span class="org-comment">-- =============================================</span>
<span class="org-doc">SET ANSI_NULLS ON</span>
<span class="org-doc">go</span>
<span class="org-doc">SET QUOTED_IDENTIFIER ON</span>
<span class="org-doc">go</span>
<span class="org-comment">-- =============================================</span>
<span class="org-comment">-- Author:      /* Author */</span>
<span class="org-comment">-- Create date: /* Create Date */</span>
<span class="org-comment">-- Description: /* Description */</span>
<span class="org-comment">-- =============================================</span>
<span class="org-keyword">CREATE</span> <span class="org-keyword">FUNCTION</span> $1 (<span class="org-variable-name">@</span>{2:<span class="org-keyword">parameter_name</span>} ${3:parameter_data_type})
<span class="org-keyword">RETURNS</span> ${4:function_data_type}
<span class="org-comment">--WITH ENCRYPTION|SCHEMABINDING, ...</span>
<span class="org-keyword">AS</span>
<span class="org-comment">-- Returns ...</span>
<span class="org-keyword">BEGIN</span>
    <span class="org-comment-delimiter">/* </span><span class="org-comment">function body */</span>
<span class="org-comment">--  eg.</span>
<span class="org-comment">--  DECLARE @v_ret $4</span>
<span class="org-comment">--  SELECT @v_ret = /* scalar expression */</span>
<span class="org-comment">--  RETURN @v_ret$0</span>
<span class="org-keyword">END</span>;
<span class="org-doc">go</span>

<span class="org-comment">-- =============================================</span>
<span class="org-comment">-- Example to execute function</span>
<span class="org-comment">-- =============================================</span>
<span class="org-keyword">SELECT</span> $1 <span class="org-comment-delimiter">/* </span><span class="org-comment">owner.scalar_function_name */</span>
    (<span class="org-comment-delimiter">/* </span><span class="org-comment">value_for_@parameter_name */</span>)
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5734f9a" class="outline-5">
<h5 id="org5734f9a">[af] Alter Function</h5>
<div class="outline-text-5" id="text-org5734f9a">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">ALTER</span> <span class="org-keyword">FUNCTION</span> fr...
# <span class="org-comment">--</span>
<span class="org-keyword">ALTER</span> <span class="org-keyword">FUNCTION</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-org4eb3d8b" class="outline-5">
<h5 id="org4eb3d8b">[dfn] Drop Function</h5>
<div class="outline-text-5" id="text-org4eb3d8b">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Drop</span> <span class="org-keyword">function</span>
# <span class="org-comment">--</span>
<span class="org-keyword">DROP</span> <span class="org-keyword">FUNCTION</span> $0
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orge65c07f" class="outline-4">
<h4 id="orge65c07f">Index</h4>
<div class="outline-text-4" id="text-orge65c07f">
</div>
<div id="outline-container-orgc57bf5b" class="outline-5">
<h5 id="orgc57bf5b">[cni] Create Non-Clustered Index</h5>
<div class="outline-text-5" id="text-orgc57bf5b">
<p>
Creates a basic, non-clustered index.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Create</span> non-<span class="org-keyword">unique</span> n...
# <span class="org-comment">--</span>
<span class="org-keyword">IF</span> <span class="org-keyword">EXISTS</span> (<span class="org-keyword">SELECT</span> <span class="org-keyword">name</span> <span class="org-keyword">FROM</span> sys.indexes <span class="org-keyword">WHERE</span> <span class="org-keyword">name</span> = N<span class="org-string">'${3:index_name}'</span>)
    <span class="org-keyword">DROP</span> <span class="org-keyword">INDEX</span> $3 <span class="org-keyword">ON</span> ${1:[<span class="org-keyword">schema</span>].[owner_name]};
<span class="org-doc">go</span>

<span class="org-keyword">CREATE</span> <span class="org-keyword">NONCLUSTERED</span> <span class="org-keyword">INDEX</span> $3
<span class="org-keyword">ON</span> $1 (${2:<span class="org-keyword">column</span>})
<span class="org-comment">--WITH PAD_INDEX</span>
<span class="org-comment">--    | FILLFACTOR = fillfactor</span>
<span class="org-comment">--    | IGNORE_DUP_KEY</span>
<span class="org-comment">--    | DROP_EXISTING</span>
<span class="org-comment">--    | STATISTICS_NORECOMPUTE</span>
<span class="org-comment">--    | SORT_IN_TEMPDB, .. as required</span>
<span class="org-comment">-- ON filegroup</span>
<span class="org-doc">go</span>
$0
</pre>
</div>
</div>
</div>

<div id="outline-container-org9ebd4fe" class="outline-5">
<h5 id="org9ebd4fe">[cuni] Create Unique Non-Clustered Index</h5>
<div class="outline-text-5" id="text-org9ebd4fe">
<p>
Creates a unique, non-clustered index.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Create</span> <span class="org-keyword">unique</span> nonclu...
# <span class="org-comment">--</span>
<span class="org-keyword">IF</span> <span class="org-keyword">EXISTS</span> (<span class="org-keyword">SELECT</span> <span class="org-keyword">name</span> <span class="org-keyword">FROM</span> sys.indexes <span class="org-keyword">WHERE</span> <span class="org-keyword">name</span> = N<span class="org-string">'${3:index_name}'</span>)
    <span class="org-keyword">DROP</span> <span class="org-keyword">INDEX</span> $3 <span class="org-keyword">ON</span> ${1:[<span class="org-keyword">schema</span>].[owner_name]};
<span class="org-doc">go</span>

<span class="org-keyword">CREATE</span> <span class="org-keyword">UNIQUE</span> <span class="org-keyword">NONCLUSTERED</span> <span class="org-keyword">INDEX</span> $3
<span class="org-keyword">ON</span> $1 (${2:<span class="org-keyword">column</span>})
<span class="org-comment">--WITH</span>
<span class="org-comment">--    PAD_INDEX,</span>
<span class="org-comment">--    FILLFACTOR = fillfactor,</span>
<span class="org-comment">--    IGNORE_DUP_KEY,</span>
<span class="org-comment">--    DROP_EXISTING = OFF,</span>
<span class="org-comment">--    STATISTICS_NORECOMPUTE,</span>
<span class="org-comment">--    SORT_IN_TEMPDB = OFF, .. as required</span>
<span class="org-keyword">ON</span> ${3:<span class="org-builtin">filegroup_name</span>}
<span class="org-doc">go</span>
$0
</pre>
</div>
</div>
</div>

<div id="outline-container-org1de7df5" class="outline-5">
<h5 id="org1de7df5">[cci] Create Clustered Index</h5>
<div class="outline-text-5" id="text-org1de7df5">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Create</span> non-<span class="org-keyword">unique</span> cl...
# <span class="org-comment">--</span>
<span class="org-keyword">IF</span> <span class="org-keyword">EXISTS</span> (<span class="org-keyword">SELECT</span> <span class="org-keyword">name</span> <span class="org-keyword">FROM</span> sys.indexes <span class="org-keyword">WHERE</span> <span class="org-keyword">name</span> = N<span class="org-string">'${3:index_name}'</span>)
    <span class="org-keyword">DROP</span> <span class="org-keyword">INDEX</span> $3 <span class="org-keyword">ON</span> ${1:[<span class="org-keyword">schema</span>].[owner_name]};
<span class="org-doc">go</span>

<span class="org-keyword">CREATE</span> <span class="org-keyword">CLUSTERED</span> <span class="org-keyword">INDEX</span> $3
<span class="org-keyword">ON</span> $1 (${2:<span class="org-keyword">column</span>})
<span class="org-comment">--WITH PAD_INDEX</span>
<span class="org-comment">--    | FILLFACTOR = fillfactor</span>
<span class="org-comment">--    | IGNORE_DUP_KEY</span>
<span class="org-comment">--    | DROP_EXISTING</span>
<span class="org-comment">--    | STATISTICS_NORECOMPUTE</span>
<span class="org-comment">--    | SORT_IN_TEMPDB, .. as required</span>
<span class="org-comment">-- ON filegroup</span>
<span class="org-doc">go</span>
$0
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf2f47a1" class="outline-5">
<h5 id="orgf2f47a1">[cuci] Create Unique Clustered Index</h5>
<div class="outline-text-5" id="text-orgf2f47a1">
<p>
Create index full syntax.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Create</span> <span class="org-keyword">unique</span> cluster...
# <span class="org-comment">--</span>
<span class="org-keyword">IF</span> <span class="org-keyword">EXISTS</span> (<span class="org-keyword">SELECT</span> <span class="org-keyword">name</span> <span class="org-keyword">FROM</span> sys.indexes <span class="org-keyword">WHERE</span> <span class="org-keyword">name</span> = N<span class="org-string">'${3:index_name}'</span>)
    <span class="org-keyword">DROP</span> <span class="org-keyword">INDEX</span> $3 <span class="org-keyword">ON</span> ${1:[<span class="org-keyword">schema</span>].[owner_name]};
<span class="org-doc">go</span>

<span class="org-keyword">CREATE</span> <span class="org-keyword">UNIQUE</span> <span class="org-keyword">CLUSTERED</span> <span class="org-keyword">INDEX</span> $3
<span class="org-keyword">ON</span> $1 (${2:<span class="org-keyword">column</span>})
<span class="org-keyword">WITH</span>
PAD_INDEX,
<span class="org-keyword">FILLFACTOR</span> = ${3:fillfactor_value},
IGNORE_DUP_KEY,
DROP_EXISTING,
STATISTICS_NORECOMPUTE
<span class="org-comment">--    | SORT_IN_TEMPDB, .. as required</span>
<span class="org-keyword">ON</span> ${4:<span class="org-builtin">filegroup_name</span>}
<span class="org-doc">go</span>
$0
</pre>
</div>
</div>
</div>

<div id="outline-container-orgae502a1" class="outline-5">
<h5 id="orgae502a1">[di] Drop Index</h5>
<div class="outline-text-5" id="text-orgae502a1">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Drop</span> <span class="org-keyword">index</span>
# <span class="org-comment">--</span>
<span class="org-keyword">DROP</span> <span class="org-keyword">INDEX</span> $0
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org9609641" class="outline-4">
<h4 id="org9609641">Join fragment</h4>
<div class="outline-text-4" id="text-org9609641">
</div>
<div id="outline-container-org95808f2" class="outline-5">
<h5 id="org95808f2">[cj] Cross Join</h5>
<div class="outline-text-5" id="text-org95808f2">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">CROSS</span> <span class="org-keyword">JOIN</span> fragment
# <span class="org-comment">--</span>
<span class="org-keyword">CROSS</span> <span class="org-keyword">JOIN</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-org0aa3cc0" class="outline-5">
<h5 id="org0aa3cc0">[fj] Full Join</h5>
<div class="outline-text-5" id="text-org0aa3cc0">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">FULL</span> <span class="org-keyword">JOIN</span> fragment
# <span class="org-comment">--</span>
<span class="org-keyword">FULL</span> <span class="org-keyword">JOIN</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-org4a7346e" class="outline-5">
<h5 id="org4a7346e">[foj] Full Outer Join</h5>
<div class="outline-text-5" id="text-org4a7346e">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">FULL</span> <span class="org-keyword">OUTER</span> <span class="org-keyword">JOIN</span> fr...
# <span class="org-comment">--</span>
<span class="org-keyword">FULL</span> <span class="org-keyword">OUTER</span> <span class="org-keyword">JOIN</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb2ca9b3" class="outline-5">
<h5 id="orgb2ca9b3">[ij] Inner Join</h5>
<div class="outline-text-5" id="text-orgb2ca9b3">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">INNER</span> <span class="org-keyword">JOIN</span> fragment
# <span class="org-comment">--</span>
<span class="org-keyword">INNER</span> <span class="org-keyword">JOIN</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-org195c2f8" class="outline-5">
<h5 id="org195c2f8">[j] Join</h5>
<div class="outline-text-5" id="text-org195c2f8">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">JOIN</span> fragment
# <span class="org-comment">--</span>
<span class="org-keyword">JOIN</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-org0c70caa" class="outline-5">
<h5 id="org0c70caa">[lj] Left Join</h5>
<div class="outline-text-5" id="text-org0c70caa">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">LEFT</span> <span class="org-keyword">JOIN</span> fragment
# <span class="org-comment">--</span>
<span class="org-keyword">LEFT</span> <span class="org-keyword">JOIN</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-orgafcf3a5" class="outline-5">
<h5 id="orgafcf3a5">[loj] Left Outer Join</h5>
<div class="outline-text-5" id="text-orgafcf3a5">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">LEFT</span> <span class="org-keyword">OUTER</span> <span class="org-keyword">JOIN</span> fr...
# <span class="org-comment">--</span>
<span class="org-keyword">LEFT</span> <span class="org-keyword">OUTER</span> <span class="org-keyword">JOIN</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-orga271c59" class="outline-5">
<h5 id="orga271c59">[rj] Right Join</h5>
<div class="outline-text-5" id="text-orga271c59">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">RIGHT</span> <span class="org-keyword">JOIN</span> fragment
# <span class="org-comment">--</span>
<span class="org-keyword">RIGHT</span> <span class="org-keyword">JOIN</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-orga48afea" class="outline-5">
<h5 id="orga48afea">[roj] Right Outer Join</h5>
<div class="outline-text-5" id="text-orga48afea">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">RIGHT</span> <span class="org-keyword">OUTER</span> <span class="org-keyword">JOIN</span> f...
# <span class="org-comment">--</span>
<span class="org-keyword">RIGHT</span> <span class="org-keyword">OUTER</span> <span class="org-keyword">JOIN</span> $0
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org8415299" class="outline-4">
<h4 id="org8415299">Login</h4>
<div class="outline-text-4" id="text-org8415299">
</div>
<div id="outline-container-orge5bb325" class="outline-5">
<h5 id="orge5bb325">[cl] Create SQL Authentication Login</h5>
<div class="outline-text-5" id="text-orge5bb325">
<p>
Creates a SQL Server Authentication login.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">CREATE</span> <span class="org-keyword">SQL</span> Server l...
# <span class="org-comment">--</span>
<span class="org-keyword">CREATE</span> LOGIN ${1:SQL_login_name}
<span class="org-keyword">WITH</span> PASSWORD = N<span class="org-string">'${2:Strong_P@ssword}'</span>$0 <span class="org-comment-delimiter">/* </span><span class="org-comment">HASHED */</span> <span class="org-comment-delimiter">/* </span><span class="org-comment">MUST_CHANGE */</span>
<span class="org-comment">--  DEFAULT_DATABASE = database</span>
<span class="org-comment">--  DEFAULT_LANGUAGE = language</span>
<span class="org-comment">--  CHECK_POLICY = ON | OFF</span>
<span class="org-comment">--  SID = sid</span>
<span class="org-comment">--  CHECK_EXPIRATION = ON | OFF</span>
<span class="org-comment">--  CREDENTIAL = credential_name</span>
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge62940b" class="outline-5">
<h5 id="orge62940b">Create Windows Authentication Login</h5>
<div class="outline-text-5" id="text-orge62940b">
<p>
Creates a Windows Authentication login.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">CREATE</span> Windows l...
# <span class="org-comment">--</span>
<span class="org-keyword">CREATE</span> LOGIN ${1:[domain_name\<span class="org-builtin">user_name</span>]}
<span class="org-keyword">FROM</span> WINDOWS$0
<span class="org-keyword">WITH</span>
DEFAULT_DATABASE = ${2:default_database}
<span class="org-comment">--  DEFAULT_LANGUAGE = language</span>
<span class="org-comment">--  CERTIFICATE certificate_name</span>
<span class="org-comment">--  ASYMMETRIC KEY key_name</span>
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc850a12" class="outline-5">
<h5 id="orgc850a12">[dl] Drop Login</h5>
<div class="outline-text-5" id="text-orgc850a12">
<p>
Drop login.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Drop</span> login
# <span class="org-comment">--</span>
<span class="org-keyword">DROP</span> LOGIN ${1:SQL_login_name}
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgfd75701" class="outline-4">
<h4 id="orgfd75701">Role</h4>
<div class="outline-text-4" id="text-orgfd75701">
</div>
<div id="outline-container-org9786d10" class="outline-5">
<h5 id="org9786d10">Create Role</h5>
<div class="outline-text-5" id="text-org9786d10">
<p>
Create Database Role.
</p>

<div class="org-src-container">
<pre class="src src-sql"><span class="org-doc">USE ${1:database_name}</span>
<span class="org-doc">go</span>

<span class="org-keyword">CREATE</span> <span class="org-keyword">ROLE</span> ${2:role_name}$0
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org547a0f9" class="outline-4">
<h4 id="org547a0f9">Schema</h4>
<div class="outline-text-4" id="text-org547a0f9">
</div>
<div id="outline-container-orgef9996b" class="outline-5">
<h5 id="orgef9996b">Create Schema</h5>
<div class="outline-text-5" id="text-orgef9996b">
<p>
Create a database schema.
</p>

<div class="org-src-container">
<pre class="src src-sql"><span class="org-keyword">CREATE</span> <span class="org-keyword">SCHEMA</span> ${1:<span class="org-keyword">schema</span>}$0
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org229a85b" class="outline-4">
<h4 id="org229a85b">Set options</h4>
<div class="outline-text-4" id="text-org229a85b">
</div>
<div id="outline-container-orgd2ae8ad" class="outline-5">
<h5 id="orgd2ae8ad">[san] Set ANSI_NULLS</h5>
<div class="outline-text-5" id="text-orgd2ae8ad">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: Change the <span class="org-keyword">current</span> A...
# <span class="org-comment">--</span>
<span class="org-doc">SET ANSI_NULLS ON$0</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8fd851b" class="outline-5">
<h5 id="org8fd851b">[sqi] Set QUOTED_IDENTIFIER</h5>
<div class="outline-text-5" id="text-org8fd851b">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: Change the <span class="org-keyword">current</span> ...
# <span class="org-comment">--</span>
<span class="org-doc">SET QUOTED_IDENTIFIER ON$0</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9b033b2" class="outline-5">
<h5 id="org9b033b2">[sxa] Set XACT_ABORT</h5>
<div class="outline-text-5" id="text-org9b033b2">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: Change the <span class="org-keyword">current</span> X...
# <span class="org-comment">--</span>
<span class="org-doc">SET XACT_ABORT OFF$0</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgef78d4f" class="outline-4">
<h4 id="orgef78d4f">Stored Procedure</h4>
<div class="outline-text-4" id="text-orgef78d4f">
<p>
Naming convention: stored procedures are prefixed with <code>usp</code>.
</p>
</div>

<div id="outline-container-org92e9d01" class="outline-5">
<h5 id="org92e9d01">[cp] Create Procedure Basic Template</h5>
<div class="outline-text-5" id="text-org92e9d01">
<p>
Create a simple stored procedure with output parameter.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Create</span> stored proced...
# <span class="org-comment">--</span>
<span class="org-comment">-- Drop stored procedure if it already exists</span>
<span class="org-keyword">IF</span> <span class="org-builtin">OBJECT_ID</span> (<span class="org-string">'${1:[schema].[procedure_name]}'</span>, <span class="org-string">'P'</span>) <span class="org-keyword">IS</span> <span class="org-keyword">NOT</span> <span class="org-keyword">NULL</span>
    <span class="org-keyword">DROP</span> <span class="org-keyword">PROCEDURE</span> $1;
<span class="org-doc">go</span>

<span class="org-comment">-- =============================================</span>
<span class="org-doc">SET ANSI_NULLS ON</span>
<span class="org-doc">go</span>
<span class="org-doc">SET QUOTED_IDENTIFIER ON</span>
<span class="org-doc">go</span>
<span class="org-comment">-- =============================================</span>
<span class="org-comment">-- Author:      /* Author */</span>
<span class="org-comment">-- Create date: /* Create Date */</span>
<span class="org-comment">-- Description: /* Description */</span>
<span class="org-comment">-- =============================================</span>
<span class="org-keyword">CREATE</span> <span class="org-keyword">PROCEDURE</span> $1
    <span class="org-comment">-- Add the parameters for the function here</span>
    <span class="org-variable-name">@</span>${2:parameter_name_1} ${3:parameter_data_type_1} = ${4:default_value_for_parameter_1}
    <span class="org-variable-name">@</span>${5:parameter_name_2} ${6:parameter_data_type_2} <span class="org-keyword">OUTPUT</span>
<span class="org-comment">-- WITH ENCRYPTION, RECOMPILE, EXECUTE AS CALLER|SELF|OWNER| 'user_name'</span>
<span class="org-keyword">AS</span>
<span class="org-keyword">BEGIN</span>
    <span class="org-comment">-- SET NOCOUNT ON added to prevent extra result sets from</span>
    <span class="org-comment">-- interfering with SELECT statements.</span>
    <span class="org-keyword">SET</span> NOCOUNT <span class="org-keyword">ON</span>;

    <span class="org-comment">-- Insert statements for procedure here</span>
    <span class="org-keyword">SELECT</span> <span class="org-variable-name">@</span>$2$0
<span class="org-keyword">END</span>
<span class="org-doc">go</span>

<span class="org-comment">--SET QUOTED_IDENTIFIER ON|OFF</span>
<span class="org-comment">--SET ANSI_NULLS ON|OFF</span>
<span class="org-comment">--go</span>

<span class="org-comment">-- =============================================</span>
<span class="org-comment">-- Example to execute the stored procedure</span>
<span class="org-comment">-- =============================================</span>
<span class="org-keyword">DECLARE</span> <span class="org-variable-name">@</span>${7:variable_for_output_parameter} $6

<span class="org-keyword">EXECUTE</span> $1 <span class="org-comment-delimiter">/* </span><span class="org-comment">value_for_parameter_1 */</span>, $7 <span class="org-keyword">OUTPUT</span>

<span class="org-keyword">SELECT</span> $7
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org902ce3b" class="outline-5">
<h5 id="org902ce3b">[crlp] Create CLR Procedure</h5>
<div class="outline-text-5" id="text-org902ce3b">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Create</span> CLR stored pr...
# <span class="org-comment">--</span>
<span class="org-comment">--SET QUOTED_IDENTIFIER ON|OFF</span>
<span class="org-comment">--SET ANSI_NULLS ON|OFF</span>
<span class="org-comment">--go</span>

<span class="org-keyword">CREATE</span> <span class="org-keyword">PROCEDURE</span> ${1:[<span class="org-keyword">schema</span>].[procedure_name]}
(
    <span class="org-variable-name">@</span>${2:<span class="org-keyword">parameter_name</span>} ${3:parameter_data_type}
)
<span class="org-comment">-- WITH EXECUTE AS CALLER|SELF|OWNER| 'user_name'</span>
<span class="org-keyword">AS</span> <span class="org-keyword">EXTERNAL</span> <span class="org-keyword">NAME</span> ${4:[assembly].[<span class="org-keyword">class</span>].[<span class="org-keyword">method</span>]};
<span class="org-doc">go</span>

<span class="org-comment">--SET QUOTED_IDENTIFIER ON|OFF</span>
<span class="org-comment">--SET ANSI_NULLS ON|OFF</span>
<span class="org-comment">--go$0</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org56dedc1" class="outline-5">
<h5 id="org56dedc1">[ap] Alter Procedure</h5>
<div class="outline-text-5" id="text-org56dedc1">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">ALTER</span> <span class="org-keyword">PROCEDURE</span>
# <span class="org-comment">--</span>
<span class="org-keyword">ALTER</span> <span class="org-keyword">PROCEDURE</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-org5530678" class="outline-5">
<h5 id="org5530678">[dp] Drop Procedure</h5>
<div class="outline-text-5" id="text-org5530678">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Drop</span> stored <span class="org-keyword">procedure</span>
# <span class="org-comment">--</span>
<span class="org-keyword">DROP</span> <span class="org-keyword">PROCEDURE</span> $0
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org37734ee" class="outline-4">
<h4 id="org37734ee">Synonym</h4>
<div class="outline-text-4" id="text-org37734ee">
</div>
<div id="outline-container-org46a20c3" class="outline-5">
<h5 id="org46a20c3">Create Synonym</h5>
<div class="outline-text-5" id="text-org46a20c3">
<p>
Creates a synonym.
</p>

<div class="org-src-container">
<pre class="src src-sql"><span class="org-keyword">CREATE</span> SYNONYM ${1:[<span class="org-keyword">schema</span>].[synonym_name]}
<span class="org-keyword">FOR</span> ${2:[<span class="org-keyword">schema</span>].[<span class="org-builtin">object_name</span>]};
<span class="org-doc">go$0</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org27b1519" class="outline-4">
<h4 id="org27b1519">Table</h4>
<div class="outline-text-4" id="text-org27b1519">
</div>
<div id="outline-container-orgca809a3" class="outline-5">
<h5 id="orgca809a3">[ct] Create Table</h5>
<div class="outline-text-5" id="text-orgca809a3">
<p>
Creates a table (and drop previous one with the same name).
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Create</span> <span class="org-keyword">table</span>
# <span class="org-comment">--</span>
<span class="org-keyword">IF</span> <span class="org-builtin">OBJECT_ID</span> (<span class="org-string">'${1:[schema].[table_name]}'</span>, <span class="org-string">'U'</span>) <span class="org-keyword">IS</span> <span class="org-keyword">NOT</span> <span class="org-keyword">NULL</span>
    <span class="org-keyword">DROP</span> <span class="org-keyword">TABLE</span> $1;
<span class="org-doc">go</span>

<span class="org-keyword">CREATE</span> <span class="org-keyword">TABLE</span> $1
(
    ${2:column_1} ${3:data_type_1} ${4:column_nullability_1},
    ${5:column_2} ${6:data_type_2} ${5:column_nullability_2},$0
    <span class="org-keyword">CONSTRAINT</span> <span class="org-comment-delimiter">/* </span><span class="org-comment">contraint_name */</span> <span class="org-keyword">PRIMARY</span> <span class="org-keyword">KEY</span> (<span class="org-comment-delimiter">/* </span><span class="org-comment">columns_in_primary_key */</span>)
);
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf4b0356" class="outline-5">
<h5 id="orgf4b0356">[at] Alter Table fragment</h5>
<div class="outline-text-5" id="text-orgf4b0356">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">ALTER</span> <span class="org-keyword">TABLE</span> fragm...
# <span class="org-comment">--</span>
<span class="org-keyword">ALTER</span> <span class="org-keyword">TABLE</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-org6088699" class="outline-5">
<h5 id="org6088699">[ata] Add Column</h5>
<div class="outline-text-5" id="text-org6088699">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Add</span> <span class="org-keyword">column</span>
# <span class="org-comment">--</span>
<span class="org-keyword">ALTER</span> <span class="org-keyword">TABLE</span> ${1:[<span class="org-keyword">schema</span>].[<span class="org-keyword">table_name</span>]} <span class="org-keyword">ADD</span> [${2:<span class="org-keyword">column_name</span>}] ${3:data_type} ${4:column_nullability};
<span class="org-doc">go$0</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfac7e21" class="outline-5">
<h5 id="orgfac7e21">[atac] modify Column</h5>
<div class="outline-text-5" id="text-orgfac7e21">
<div class="warning">
<p>
Running <code>ALTER COLUMN</code> without mentioning attribute <code>NOT NULL</code> will result in the
column being changed to <b>nullable</b>, if it is already not.
</p>

</div>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Modify</span> <span class="org-keyword">column</span>
# <span class="org-comment">--</span>
<span class="org-comment">-- WARNING: If the column is not nullable, specify attribute NOT NULL.</span>
<span class="org-keyword">ALTER</span> <span class="org-keyword">TABLE</span> ${1:[<span class="org-keyword">schema</span>].[<span class="org-keyword">table_name</span>]} <span class="org-keyword">ALTER</span> <span class="org-keyword">COLUMN</span> $0;
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8bf7dbf" class="outline-5">
<h5 id="org8bf7dbf">[atd] Drop column</h5>
<div class="outline-text-5" id="text-org8bf7dbf">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Drop</span> <span class="org-keyword">column</span>
# <span class="org-comment">--</span>
<span class="org-keyword">ALTER</span> <span class="org-keyword">TABLE</span> ${1:[<span class="org-keyword">schema</span>].[<span class="org-keyword">table_name</span>]} <span class="org-keyword">DROP</span> <span class="org-keyword">COLUMN</span> $0;
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga9064d8" class="outline-5">
<h5 id="orga9064d8">Add Constraint</h5>
<div class="outline-text-5" id="text-orga9064d8">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Add</span> <span class="org-keyword">constraint</span>
# <span class="org-comment">--</span>
<span class="org-keyword">ALTER</span> <span class="org-keyword">TABLE</span> ${1:[<span class="org-keyword">schema</span>].[<span class="org-keyword">table_name</span>]}
<span class="org-keyword">ADD</span> <span class="org-keyword">CONSTRAINT</span> ${2:<span class="org-keyword">constraint_name</span>};
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2cb4072" class="outline-5">
<h5 id="org2cb4072">[atdc] Drop Constraint</h5>
<div class="outline-text-5" id="text-org2cb4072">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Drop</span> <span class="org-keyword">constraint</span>
# <span class="org-comment">--</span>
<span class="org-keyword">ALTER</span> <span class="org-keyword">TABLE</span> ${1:[<span class="org-keyword">schema</span>].[<span class="org-keyword">table_name</span>]}
<span class="org-keyword">DROP</span> <span class="org-keyword">CONSTRAINT</span> ${2:<span class="org-keyword">constraint_name</span>};
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org80b2358" class="outline-5">
<h5 id="org80b2358">[dt] Drop Table</h5>
<div class="outline-text-5" id="text-org80b2358">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Drop</span> <span class="org-keyword">table</span>
# <span class="org-comment">--</span>

<span class="org-keyword">IF</span> <span class="org-keyword">EXISTS</span> (<span class="org-keyword">SELECT</span> *
             <span class="org-keyword">FROM</span> sys.tables
             <span class="org-keyword">JOIN</span> sys.schemas
               <span class="org-keyword">ON</span> sys.tables.schema_id = sys.schemas.schema_id
            <span class="org-keyword">WHERE</span> sys.schemas.<span class="org-keyword">name</span> = N<span class="org-string">'${1:schema}'</span>
              <span class="org-keyword">AND</span> sys.tables.<span class="org-keyword">name</span> = N<span class="org-string">'${2:table}'</span>)
    <span class="org-keyword">DROP</span> <span class="org-keyword">TABLE</span> $1.$2
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org8cf61be" class="outline-4">
<h4 id="org8cf61be">Transaction</h4>
<div class="outline-text-4" id="text-org8cf61be">
</div>
<div id="outline-container-org42de49c" class="outline-5">
<h5 id="org42de49c">[bt] Begin Transaction</h5>
<div class="outline-text-5" id="text-org42de49c">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Begin</span> <span class="org-keyword">transaction</span>
# <span class="org-comment">--</span>
<span class="org-keyword">BEGIN</span> <span class="org-keyword">TRANSACTION</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf9a9191" class="outline-5">
<h5 id="orgf9a9191">[ctr] Commit Transaction</h5>
<div class="outline-text-5" id="text-orgf9a9191">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Commit</span> <span class="org-keyword">transaction</span>
# <span class="org-comment">--</span>
<span class="org-keyword">COMMIT</span> <span class="org-keyword">TRANSACTION</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf6eb7dc" class="outline-5">
<h5 id="orgf6eb7dc">[rt] Rollback Transaction</h5>
<div class="outline-text-5" id="text-orgf6eb7dc">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Rollback</span> <span class="org-keyword">transaction</span>
# <span class="org-comment">--</span>
<span class="org-keyword">ROLLBACK</span> <span class="org-keyword">TRANSACTION</span> $0
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgbcdc36b" class="outline-4">
<h4 id="orgbcdc36b">Trigger</h4>
<div class="outline-text-4" id="text-orgbcdc36b">
</div>
<div id="outline-container-org0fb6b72" class="outline-5">
<h5 id="org0fb6b72">Create Trigger</h5>
<div class="outline-text-5" id="text-org0fb6b72">
<p>
Creates a trigger.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Create</span> <span class="org-keyword">trigger</span>
# <span class="org-comment">--</span>
<span class="org-keyword">IF</span> <span class="org-builtin">OBJECT_ID</span> (<span class="org-string">'${1:trigger_name}'</span>, <span class="org-string">'TR'</span>) <span class="org-keyword">IS</span> <span class="org-keyword">NOT</span> <span class="org-keyword">NULL</span>
    <span class="org-keyword">DROP</span> <span class="org-keyword">TRIGGER</span> $1;
<span class="org-doc">go</span>

<span class="org-comment">-- =============================================</span>
<span class="org-doc">SET ANSI_NULLS ON</span>
<span class="org-doc">go</span>
<span class="org-doc">SET QUOTED_IDENTIFIER ON</span>
<span class="org-doc">go</span>
<span class="org-comment">-- =============================================</span>
<span class="org-comment">-- Author:      /* Author */</span>
<span class="org-comment">-- Create date: /* Create Date */</span>
<span class="org-comment">-- Description: /* Description */</span>
<span class="org-comment">-- =============================================</span>
<span class="org-keyword">CREATE</span> <span class="org-keyword">TRIGGER</span> $1
<span class="org-keyword">ON</span> ${2:[<span class="org-keyword">schema</span>].[<span class="org-keyword">table_name</span>]}
<span class="org-keyword">FOR</span> <span class="org-keyword">INSERT</span>, <span class="org-keyword">UPDATE</span>, <span class="org-keyword">DELETE</span>
<span class="org-keyword">AS</span>
<span class="org-keyword">BEGIN</span>
    <span class="org-comment">-- SET NOCOUNT ON added to prevent extra result sets from</span>
    <span class="org-comment">-- interfering with SELECT statements.</span>
    <span class="org-keyword">SET</span> NOCOUNT <span class="org-keyword">ON</span>;

    <span class="org-comment">-- Insert statements for trigger here</span>
    <span class="org-keyword">RAISERROR</span> (50009, 16, 10)
    $0
<span class="org-keyword">END</span>;
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org55ade8a" class="outline-5">
<h5 id="org55ade8a">Enable Trigger</h5>
<div class="outline-text-5" id="text-org55ade8a">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: Enable <span class="org-keyword">trigger</span>
# <span class="org-comment">--</span>
<span class="org-keyword">ALTER</span> <span class="org-keyword">TABLE</span> ${1:[<span class="org-keyword">schema</span>].[<span class="org-keyword">table_name</span>]} ENABLE <span class="org-keyword">TRIGGER</span> $0;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbd650ac" class="outline-5">
<h5 id="orgbd650ac">Enable All Triggers</h5>
<div class="outline-text-5" id="text-orgbd650ac">
<p>
Enable all triggers on table.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: Enable <span class="org-keyword">all</span> triggers <span class="org-keyword">on</span>...
# <span class="org-comment">--</span>
<span class="org-keyword">ALTER</span> <span class="org-keyword">TABLE</span> ${1:[<span class="org-keyword">schema</span>].[<span class="org-keyword">table_name</span>]}$0 ENABLE <span class="org-keyword">TRIGGER</span> <span class="org-keyword">ALL</span>;
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org56d6fda" class="outline-5">
<h5 id="org56d6fda">Disable Trigger</h5>
<div class="outline-text-5" id="text-org56d6fda">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: Disable <span class="org-keyword">trigger</span>
# <span class="org-comment">--</span>
<span class="org-keyword">ALTER</span> <span class="org-keyword">TABLE</span> ${1:[<span class="org-keyword">schema</span>].[<span class="org-keyword">table_name</span>]} DISABLE <span class="org-keyword">TRIGGER</span> $0;
</pre>
</div>
</div>
</div>

<div id="outline-container-org4281442" class="outline-5">
<h5 id="org4281442">Disable All Triggers</h5>
<div class="outline-text-5" id="text-org4281442">
<p>
Disable all triggers on table.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: Disable <span class="org-keyword">all</span> triggers <span class="org-keyword">on</span>...
# <span class="org-comment">--</span>
<span class="org-keyword">ALTER</span> <span class="org-keyword">TABLE</span> ${1:[<span class="org-keyword">schema</span>].[<span class="org-keyword">table_name</span>]}$0 DISABLE <span class="org-keyword">TRIGGER</span> <span class="org-keyword">ALL</span>;
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org08b0d0f" class="outline-4">
<h4 id="org08b0d0f">User</h4>
<div class="outline-text-4" id="text-org08b0d0f">
</div>
<div id="outline-container-org4ef00d3" class="outline-5">
<h5 id="org4ef00d3">[cu] Create User</h5>
<div class="outline-text-5" id="text-org4ef00d3">
<p>
Creates a database user.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Create</span> <span class="org-keyword">database</span> <span class="org-keyword">user</span>
# <span class="org-comment">--</span>
<span class="org-keyword">CREATE</span> <span class="org-keyword">USER</span> ${1:UserName}$0
<span class="org-keyword">FOR</span> <span class="org-comment-delimiter">/* </span><span class="org-comment">FROM */</span> LOGIN <span class="org-comment-delimiter">/* </span><span class="org-comment">login_name */</span>
<span class="org-comment">--  CERTIFICATE certificate_name</span>
<span class="org-comment">--  ASYMMETRIC KEY key_name</span>
<span class="org-comment">--  WITHOUT LOGIN</span>
<span class="org-comment">--  WITH DEFAULT_SCHEMA = schema_name</span>
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org466a82a" class="outline-5">
<h5 id="org466a82a">[du] Drop User</h5>
<div class="outline-text-5" id="text-org466a82a">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Drop</span> <span class="org-keyword">user</span>
# <span class="org-comment">--</span>
<span class="org-keyword">DROP</span> <span class="org-keyword">USER</span> ${1:<span class="org-builtin">user_name</span>}
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgdd98060" class="outline-4">
<h4 id="orgdd98060">User Defined Data Type</h4>
<div class="outline-text-4" id="text-orgdd98060">
</div>
<div id="outline-container-org28ac890" class="outline-5">
<h5 id="org28ac890">Create User-Defined Data Type</h5>
<div class="outline-text-5" id="text-org28ac890">
<p>
Creates a user-defined data type.
</p>

<div class="org-src-container">
<pre class="src src-sql"><span class="org-keyword">CREATE</span> <span class="org-keyword">TYPE</span> ${1:[<span class="org-keyword">schema</span>].[my_data_type]}
<span class="org-keyword">FROM</span> ${2:data_type} ${3:column_nullability}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgbf27cae" class="outline-4">
<h4 id="orgbf27cae">User Defined Table Type</h4>
<div class="outline-text-4" id="text-orgbf27cae">
</div>
<div id="outline-container-org2136ec5" class="outline-5">
<h5 id="org2136ec5">Create User-Defined Table Type</h5>
<div class="outline-text-5" id="text-org2136ec5">
<p>
Creates a user-defined table type.
</p>

<div class="org-src-container">
<pre class="src src-sql"><span class="org-keyword">CREATE</span> <span class="org-keyword">TYPE</span> ${1:[<span class="org-keyword">schema</span>].[my_table_type]} <span class="org-keyword">AS</span> <span class="org-keyword">TABLE</span>
(
    ${2:column_1} ${3:data_type_1},
    ${4:column_2} ${5:data_type_2}
);
<span class="org-doc">go$0</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org44ea0a9" class="outline-4">
<h4 id="org44ea0a9">User Defined Type</h4>
<div class="outline-text-4" id="text-org44ea0a9">
</div>
<div id="outline-container-orgd908375" class="outline-5">
<h5 id="orgd908375">Create User-Defined Type</h5>
<div class="outline-text-5" id="text-orgd908375">
<p>
Creates a CLR integration user-defined type.
</p>

<div class="org-src-container">
<pre class="src src-sql"><span class="org-keyword">CREATE</span> <span class="org-keyword">TYPE</span> ${1:Utf8String}
<span class="org-keyword">EXTERNAL</span> <span class="org-keyword">NAME</span> ${2:utf8string}.${3:[Microsoft.Samples.SqlServer.utf8string]};
<span class="org-doc">go$0</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org3d16a7e" class="outline-4">
<h4 id="org3d16a7e">View</h4>
<div class="outline-text-4" id="text-org3d16a7e">
</div>
<div id="outline-container-org53c3841" class="outline-5">
<h5 id="org53c3841">[cv] Create View</h5>
<div class="outline-text-5" id="text-org53c3841">
<p>
Creates a view.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Create</span> <span class="org-keyword">view</span>
# <span class="org-comment">--</span>
<span class="org-keyword">IF</span> <span class="org-builtin">OBJECT_ID</span> (<span class="org-string">'${1:[schema].[view_name]}'</span>, <span class="org-string">'V'</span>) <span class="org-keyword">IS</span> <span class="org-keyword">NOT</span> <span class="org-keyword">NULL</span>
    <span class="org-keyword">DROP</span> <span class="org-keyword">VIEW</span> $1;
<span class="org-doc">go</span>

<span class="org-keyword">CREATE</span> <span class="org-keyword">VIEW</span> $1
<span class="org-comment">--WITH ENCRYPTION, SCHEMABINDING, VIEW_METADATA</span>
<span class="org-keyword">AS</span>
    <span class="org-keyword">SELECT</span> *
    <span class="org-keyword">FROM</span> ${2:[<span class="org-keyword">schema</span>].[sample_table]}
    $0
<span class="org-comment">-- WITH CHECK OPTION</span>
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb93e3f1" class="outline-5">
<h5 id="orgb93e3f1">[dv] Drop View</h5>
<div class="outline-text-5" id="text-orgb93e3f1">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Drop</span> <span class="org-keyword">view</span>
# <span class="org-comment">--</span>
<span class="org-keyword">DROP</span> <span class="org-keyword">VIEW</span> $0
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org499d309" class="outline-4">
<h4 id="org499d309">&#x2014; Miscellaneous ---</h4>
<div class="outline-text-4" id="text-org499d309">
</div>
<div id="outline-container-org912f42f" class="outline-5">
<h5 id="org912f42f">[sph] sp_help</h5>
<div class="outline-text-5" id="text-org912f42f">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Execute</span> sp_help
# <span class="org-comment">--</span>
<span class="org-keyword">EXEC</span> sp_help$0
</pre>
</div>
</div>
</div>

<div id="outline-container-org09bc1f2" class="outline-5">
<h5 id="org09bc1f2">[spt] sp_helptext</h5>
<div class="outline-text-5" id="text-org09bc1f2">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Execute</span> sp_helptext
# <span class="org-comment">--</span>
<span class="org-keyword">EXEC</span> sp_helptext$0
</pre>
</div>
</div>
</div>

<div id="outline-container-org515b817" class="outline-5">
<h5 id="org515b817">[xpfd] xp_fixeddrives</h5>
<div class="outline-text-5" id="text-org515b817">
<p>
Retrieve free space on all fixed drives.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: Retrieve <span class="org-keyword">free</span> <span class="org-builtin">space</span> o...
# <span class="org-comment">--</span>
<span class="org-keyword">EXEC</span> master..xp_fixeddrives
</pre>
</div>
</div>
</div>

<div id="outline-container-orgeeea77e" class="outline-5">
<h5 id="orgeeea77e">[w2] Who2</h5>
<div class="outline-text-5" id="text-orgeeea77e">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Execute</span> sp_who2$0
# <span class="org-comment">--</span>
<span class="org-keyword">EXEC</span> sp_who2$0
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbb7a745" class="outline-5">
<h5 id="orgbb7a745">[err] @@ERROR</h5>
<div class="outline-text-5" id="text-orgbb7a745">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-builtin">@@ERROR</span> <span class="org-keyword">function</span> ...
# <span class="org-comment">--</span>
<span class="org-builtin">@@ERROR</span>$0
</pre>
</div>
</div>
</div>

<div id="outline-container-org7f0d760" class="outline-5">
<h5 id="org7f0d760">[mro] Most Recent Objects</h5>
<div class="outline-text-5" id="text-org7f0d760">
<p>
Retrieve 20 most recently created objects.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: Retrieve 20 most rec...
# <span class="org-comment">--</span>
<span class="org-keyword">SELECT</span> <span class="org-keyword">TOP</span> 20 [<span class="org-keyword">name</span>], [<span class="org-keyword">type</span>], crdate
<span class="org-keyword">FROM</span> sysobjects
<span class="org-keyword">ORDER</span> <span class="org-keyword">BY</span> crdate <span class="org-keyword">DESC</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5475733" class="outline-5">
<h5 id="org5475733">Comment</h5>
<div class="outline-text-5" id="text-org5475733">
<p>
A comment block.
</p>

<div class="org-src-container">
<pre class="src src-sql"><span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * $0</span>
<span class="org-comment"> */</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2bcbe17" class="outline-5">
<h5 id="org2bcbe17">Comment</h5>
<div class="outline-text-5" id="text-org2bcbe17">
<p>
A multiline comment block.
</p>

<div class="org-src-container">
<pre class="src src-sql"><span class="org-comment-delimiter">/*******************************************</span>
<span class="org-comment"> * $0</span>
<span class="org-comment"> *******************************************/</span>
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org281e744" class="outline-3">
<h3 id="org281e744">Surround With&#x2026;</h3>
<div class="outline-text-3" id="text-org281e744">
</div>
<div id="outline-container-orga60f91f" class="outline-4">
<h4 id="orga60f91f">[begin] Code Snippet for BEGIN&#x2026;END block</h4>
<div class="outline-text-4" id="text-orga60f91f">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: Surround <span class="org-keyword">with</span> <span class="org-keyword">BEGIN</span>...
# <span class="org-comment">--</span>
<span class="org-keyword">BEGIN</span>
`yas-selected-<span class="org-type">text</span>`
<span class="org-keyword">END</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc43c288" class="outline-4">
<h4 id="orgc43c288">[if] Code Snippet for IF construct</h4>
<div class="outline-text-4" id="text-orgc43c288">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: Surround <span class="org-keyword">with</span> <span class="org-keyword">IF</span>...
# <span class="org-comment">--</span>
<span class="org-keyword">IF</span> (${1:Condition})
<span class="org-keyword">BEGIN</span>

`yas-selected-<span class="org-type">text</span>`

<span class="org-keyword">END</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org30313f8" class="outline-4">
<h4 id="org30313f8">[while] Code Snippet for WHILE loop</h4>
<div class="outline-text-4" id="text-org30313f8">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: Surround <span class="org-keyword">with</span> <span class="org-keyword">WHILE</span>...
# <span class="org-comment">--</span>
<span class="org-keyword">WHILE</span> (${1:Condition})
<span class="org-keyword">BEGIN</span>

`yas-selected-<span class="org-type">text</span>`

<span class="org-keyword">END</span>
</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Fabrice Niessen</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
