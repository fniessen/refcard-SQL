<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SQL YASnippets</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Fabrice Niessen" />
<meta name="keywords" content="emacs, yasnippet, snippets, code templates" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/readtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/readtheorg/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/lib/js/jquery.stickytableheaders.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/readtheorg/js/readtheorg.js"></script>
</head>
<body>
<div id="content">
<h1 class="title">SQL YASnippets</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org2e6fa6c">Overview</a></li>
<li><a href="#org820c5fc">Insert Snippet&#x2026;</a>
<ul>
<li><a href="#org9b9a5f5">Cursor</a></li>
<li><a href="#orgbdc1c42">Database</a></li>
<li><a href="#orgac3f25c">Fragment</a></li>
<li><a href="#org7fb255a">Function</a></li>
<li><a href="#orgc8abff5">Index</a></li>
<li><a href="#org2d70954">Join fragment</a></li>
<li><a href="#orgd581fe5">Login</a></li>
<li><a href="#orgfe08781">Role</a></li>
<li><a href="#org7f454d4">Schema</a></li>
<li><a href="#orge4f8954">Set options</a></li>
<li><a href="#org619c36d">Stored Procedure</a></li>
<li><a href="#orgd7d56ba">Synonym</a></li>
<li><a href="#org9a2a7a3">Table</a></li>
<li><a href="#org005dba5">Transaction</a></li>
<li><a href="#orga9ce16e">Trigger</a></li>
<li><a href="#org07ff86b">User</a></li>
<li><a href="#org7a01e3d">User Defined Data Type</a></li>
<li><a href="#orgef2daed">User Defined Table Type</a></li>
<li><a href="#org0f0fe4a">User Defined Type</a></li>
<li><a href="#org9c948c3">View</a></li>
<li><a href="#orgde574bf">&#x2014; Miscellaneous ---</a></li>
</ul>
</li>
<li><a href="#org78391ce">Surround With&#x2026;</a>
<ul>
<li><a href="#org2f927d8">[begin] Code Snippet for BEGIN&#x2026;END block</a></li>
<li><a href="#org67d3392">[if] Code Snippet for IF construct</a></li>
<li><a href="#orgbcf7313">[while] Code Snippet for WHILE loop</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org2e6fa6c" class="outline-2">
<h2 id="org2e6fa6c">Overview</h2>
<div class="outline-text-2" id="text-org2e6fa6c">
<p>
A <b>SQL snippet</b> is a frequently used <b>code template</b> which can be inserted into
a code you are typing by pressing the TAB key.
</p>

<p>
Snippets are categorized into 2 types:
</p>

<ul class="org-ul">
<li><b>Insert Snippets (or Expansion Snippets)</b>: These are code templates for various
SQL commands you can quickly insert into your SQL code when creating tables,
stored procedures, triggers and so on.</li>

<li><b>Surround Snippets:</b> These are code templates that help you implement code
constructs such as <code>BEGIN...END</code>, <code>IF</code>, <code>WHILE</code> and so on.</li>
</ul>
</div>
</div>

<div id="outline-container-org820c5fc" class="outline-2">
<h2 id="org820c5fc">Insert Snippet&#x2026;</h2>
<div class="outline-text-2" id="text-org820c5fc">
</div>
<div id="outline-container-org9b9a5f5" class="outline-3">
<h3 id="org9b9a5f5">Cursor</h3>
<div class="outline-text-3" id="text-org9b9a5f5">
</div>
<div id="outline-container-org30ac7f0" class="outline-4">
<h4 id="org30ac7f0">[curff] Cursor Fast-Forward</h4>
<div class="outline-text-4" id="text-org30ac7f0">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: Fast-forward <span class="org-keyword">read</span>-<span class="org-keyword">on</span>...
# <span class="org-comment">--</span>
<span class="org-comment-delimiter">/* </span><span class="org-comment">declare variables */</span>
<span class="org-keyword">DECLARE</span> <span class="org-variable-name">@variable</span> <span class="org-type">INT</span>

<span class="org-keyword">DECLARE</span> ${1:<span class="org-keyword">cursor_name</span>} <span class="org-type">CURSOR</span>
FAST_FORWARD READ_ONLY
<span class="org-keyword">FOR</span> ${2:select_statement}

<span class="org-keyword">OPEN</span> $1

<span class="org-keyword">FETCH</span> <span class="org-keyword">NEXT</span> <span class="org-keyword">FROM</span> $1
<span class="org-keyword">INTO</span> <span class="org-variable-name">@variable</span>

<span class="org-keyword">WHILE</span> <span class="org-builtin">@@FETCH_STATUS</span> = 0
<span class="org-keyword">BEGIN</span>
    $0

    <span class="org-keyword">FETCH</span> <span class="org-keyword">NEXT</span> <span class="org-keyword">FROM</span> $1
    <span class="org-keyword">INTO</span> <span class="org-variable-name">@variable</span>
<span class="org-keyword">END</span>

<span class="org-keyword">CLOSE</span> $1
<span class="org-keyword">DEALLOCATE</span> $1
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgbdc1c42" class="outline-3">
<h3 id="orgbdc1c42">Database</h3>
<div class="outline-text-3" id="text-orgbdc1c42">
</div>
<div id="outline-container-org58aaa68" class="outline-4">
<h4 id="org58aaa68">[cdb] Create DataBase</h4>
<div class="outline-text-4" id="text-org58aaa68">
<p>
Create database.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Create</span> <span class="org-keyword">database</span>
# <span class="org-comment">--</span>
<span class="org-doc">USE master</span>
<span class="org-doc">go</span>

<span class="org-comment">-- Drop the database if it already exists</span>
<span class="org-keyword">IF</span> <span class="org-keyword">EXISTS</span> (<span class="org-keyword">SELECT</span> <span class="org-keyword">name</span>
        <span class="org-keyword">FROM</span> sys.databases
        <span class="org-keyword">WHERE</span> <span class="org-keyword">name</span> = N<span class="org-string">'${1:database_name}'</span>)
    <span class="org-keyword">DROP</span> <span class="org-keyword">DATABASE</span> $1
<span class="org-doc">go</span>

<span class="org-keyword">CREATE</span> <span class="org-keyword">DATABASE</span> $1
<span class="org-keyword">ON</span>
<span class="org-keyword">PRIMARY</span> ( <span class="org-comment">-- or use FILEGROUP filegroup_name</span>
  <span class="org-keyword">NAME</span> = $1_data,
  FILENAME = <span class="org-string">'$1.mdf'</span>
) <span class="org-comment">--, and repeat as required</span>
<span class="org-builtin">LOG</span> <span class="org-keyword">ON</span>
(
  <span class="org-keyword">NAME</span> = $1_log,
  FILENAME = <span class="org-string">'$1.ldf'</span>
) <span class="org-comment">--, and repeat as required</span>
<span class="org-comment">--COLLATE collation_name</span>
<span class="org-comment">--WITH</span>
<span class="org-comment">--  DB_CHAINING ON/OFF</span>
<span class="org-comment">--  TRUSTWORTHY ON/OFF</span>
<span class="org-comment">--FOR LOAD</span>
<span class="org-comment">--FOR ATTACH</span>
<span class="org-comment">--WITH</span>
<span class="org-comment">--  ENABLE_BROKER</span>
<span class="org-comment">--  NEW_BROKER</span>
<span class="org-comment">--  ERROR_BROKER_CONVERSATIONS</span>
<span class="org-comment">--FOR ATTACH_REBUILD_LOG</span>
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org0889beb" class="outline-4">
<h4 id="org0889beb">[cdbsnap] Create DataBase Snapshot</h4>
<div class="outline-text-4" id="text-org0889beb">
<p>
Create snapshot.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Create</span> <span class="org-keyword">database</span> sna...
# <span class="org-comment">--</span>
<span class="org-doc">USE master</span>
<span class="org-doc">go</span>

<span class="org-comment">-- Drop snapshot database if it already exists</span>
<span class="org-keyword">IF</span> <span class="org-keyword">EXISTS</span> (<span class="org-keyword">SELECT</span> <span class="org-keyword">name</span>
        <span class="org-keyword">FROM</span> sys.databases
        <span class="org-keyword">WHERE</span> <span class="org-keyword">name</span> = N<span class="org-string">'${1:source_database}_${2:snapshot_id}'</span>)
    <span class="org-keyword">DROP</span> <span class="org-keyword">DATABASE</span> $1_$2
<span class="org-doc">go</span>

<span class="org-comment">-- Create the snapshot database</span>
<span class="org-keyword">CREATE</span> <span class="org-keyword">DATABASE</span> $1_$2 <span class="org-keyword">ON</span>
( <span class="org-keyword">NAME</span> = $1_$2_data,
  FILENAME = <span class="org-string">'$1_$2.ss'</span>)
<span class="org-keyword">AS</span> SNAPSHOT <span class="org-keyword">OF</span> $1;
<span class="org-doc">go$0</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3153da2" class="outline-4">
<h4 id="org3153da2">[dd] Drop Database</h4>
<div class="outline-text-4" id="text-org3153da2">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Drop</span> <span class="org-keyword">database</span>
# <span class="org-comment">--</span>
<span class="org-doc">USE master</span>
<span class="org-doc">go</span>

<span class="org-comment">-- Drop the database if it already exists</span>
<span class="org-keyword">IF</span> <span class="org-keyword">EXISTS</span> (<span class="org-keyword">SELECT</span> <span class="org-keyword">name</span>
        <span class="org-keyword">FROM</span> sys.databases
        <span class="org-keyword">WHERE</span> <span class="org-keyword">name</span> = N<span class="org-string">'${1:database_name}'</span>)
    <span class="org-keyword">DROP</span> <span class="org-keyword">DATABASE</span> $1
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge054485" class="outline-4">
<h4 id="orge054485">Database Backup</h4>
<div class="outline-text-4" id="text-orge054485">
<p>
Backup database.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Backup</span> <span class="org-keyword">database</span>
# <span class="org-comment">--</span>
<span class="org-keyword">BACKUP</span> <span class="org-keyword">DATABASE</span> ${1:database_name}
    <span class="org-keyword">TO</span> <span class="org-keyword">DISK</span> = N<span class="org-string">'Backup_Path/$1.bak'</span>
<span class="org-keyword">WITH</span>
    NOFORMAT,
    NOINIT,
    <span class="org-keyword">NAME</span> = N<span class="org-string">'$1-Full Database Backup'</span>,
    SKIP,
    STATS = 10;
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8a54017" class="outline-4">
<h4 id="org8a54017">Database Restore</h4>
<div class="outline-text-4" id="text-org8a54017">
<p>
Restore database.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Restore</span> <span class="org-keyword">database</span>
# <span class="org-comment">--</span>
<span class="org-doc">USE master</span>
<span class="org-doc">go</span>

<span class="org-keyword">RESTORE</span> <span class="org-keyword">DATABASE</span> ${1:database_name}
    <span class="org-keyword">FROM</span> <span class="org-keyword">DISK</span> = N<span class="org-string">'Backup_Path/$1.bak'</span>
<span class="org-keyword">WITH</span>
    <span class="org-keyword">FILE</span> = 1,
    NOUNLOAD,
    <span class="org-builtin">REPLACE</span>,
    STATS = 10
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgac3f25c" class="outline-3">
<h3 id="orgac3f25c">Fragment</h3>
<div class="outline-text-3" id="text-orgac3f25c">
</div>
<div id="outline-container-org300e8f0" class="outline-4">
<h4 id="org300e8f0">[ii] Insert Into</h4>
<div class="outline-text-4" id="text-org300e8f0">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">INSERT</span> <span class="org-keyword">INTO</span> fragment
# <span class="org-comment">--</span>
<span class="org-keyword">INSERT</span> <span class="org-keyword">INTO</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfafbe0e" class="outline-4">
<h4 id="orgfafbe0e">[ssf] Select Star From</h4>
<div class="outline-text-4" id="text-orgfafbe0e">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">SELECT</span> * <span class="org-keyword">FROM</span> frag...
# <span class="org-comment">--</span>
<span class="org-keyword">SELECT</span> * <span class="org-keyword">FROM</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-org9ac3960" class="outline-4">
<h4 id="org9ac3960">[st100] Select Top 100</h4>
<div class="outline-text-4" id="text-org9ac3960">
<p>
Select top 100 rows.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">SELECT</span> <span class="org-keyword">top</span> 100 <span class="org-keyword">rows</span>
# <span class="org-comment">--</span>
<span class="org-keyword">SELECT</span> <span class="org-keyword">TOP</span> 100 *
<span class="org-keyword">FROM</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-org69699dc" class="outline-4">
<h4 id="org69699dc">[scf] Select Count From</h4>
<div class="outline-text-4" id="text-org69699dc">
<p>
Count number of records returned by query.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Count</span> <span class="org-keyword">number</span> <span class="org-keyword">of</span> rec...
# <span class="org-comment">--</span>
<span class="org-keyword">SELECT</span> <span class="org-keyword">COUNT</span>(*) <span class="org-keyword">FROM</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf50c522" class="outline-4">
<h4 id="orgf50c522">[is] INFORMATION_SCHEMA</h4>
<div class="outline-text-4" id="text-orgf50c522">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: INFORMATION_SCH...
# <span class="org-comment">--</span>
INFORMATION_SCHEMA$0
</pre>
</div>
</div>
</div>

<div id="outline-container-org912f6f9" class="outline-4">
<h4 id="org912f6f9">[gb] Group By</h4>
<div class="outline-text-4" id="text-org912f6f9">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">GROUP</span> <span class="org-keyword">BY</span> fragment
# <span class="org-comment">--</span>
<span class="org-keyword">GROUP</span> <span class="org-keyword">BY</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbe9ef47" class="outline-4">
<h4 id="orgbe9ef47">[ob] Order By</h4>
<div class="outline-text-4" id="text-orgbe9ef47">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">ORDER</span> <span class="org-keyword">BY</span> fragment
# <span class="org-comment">--</span>
<span class="org-keyword">ORDER</span> <span class="org-keyword">BY</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-org2ce27f1" class="outline-4">
<h4 id="org2ce27f1">[df] Delete From</h4>
<div class="outline-text-4" id="text-org2ce27f1">
<p>
Delete statement.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">DELETE</span> <span class="org-keyword">FROM</span> frag...
# <span class="org-comment">--</span>
<span class="org-keyword">DELETE</span> <span class="org-keyword">FROM</span> ${1:[<span class="org-keyword">schema</span>].[<span class="org-keyword">table_name</span>]}
<span class="org-keyword">WHERE</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc6283b1" class="outline-4">
<h4 id="orgc6283b1">[be] Begin&#x2026;End</h4>
<div class="outline-text-4" id="text-orgc6283b1">
<p>
Insert <code>BEGIN...END</code> block.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">BEGIN</span>...<span class="org-keyword">END</span> block
# <span class="org-comment">--</span>
<span class="org-keyword">BEGIN</span>
    $0
<span class="org-keyword">END</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc8cdb2e" class="outline-4">
<h4 id="orgc8cdb2e">[tc] Try &#x2026; Catch</h4>
<div class="outline-text-4" id="text-orgc8cdb2e">
<p>
Insert <code>TRY...CATCH</code> block.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: TRY ... CATCH fragm...
# <span class="org-comment">--</span>
<span class="org-keyword">BEGIN</span> TRY
    $0
<span class="org-keyword">END</span> TRY
<span class="org-keyword">BEGIN</span> CATCH
    <span class="org-comment-delimiter">/*</span>
<span class="org-comment">        SELECT</span>
<span class="org-comment">            ERROR_NUMBER() AS ErrorNumber,</span>
<span class="org-comment">            ERROR_SEVERITY() AS ErrorSeverity,</span>
<span class="org-comment">            ERROR_STATE() AS ErrorState,</span>
<span class="org-comment">            ERROR_PROCEDURE() AS ErrorProcedure,</span>
<span class="org-comment">            ERROR_LINE() AS ErrorLine,</span>
<span class="org-comment">            ERROR_MESSAGE() AS ErrorMessage</span>
<span class="org-comment">    */</span>
<span class="org-keyword">END</span> CATCH;
</pre>
</div>
</div>
</div>

<div id="outline-container-org8e6a35c" class="outline-4">
<h4 id="org8e6a35c">[ifs] If</h4>
<div class="outline-text-4" id="text-org8e6a35c">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">IF</span> fragment
# <span class="org-comment">--</span>
<span class="org-keyword">IF</span> 1 = 1
<span class="org-keyword">BEGIN</span>
    $0
<span class="org-keyword">END</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org16186b4" class="outline-4">
<h4 id="org16186b4">If Exists</h4>
<div class="outline-text-4" id="text-org16186b4">
<p>
Perform an operation if a selected object exists.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: ...
# <span class="org-comment">--</span>
<span class="org-keyword">IF</span> <span class="org-keyword">EXISTS</span>(
 <span class="org-keyword">SELECT</span>
 <span class="org-keyword">FROM</span> ${1:<span class="org-type">object</span>})
 <span class="org-keyword">BEGIN</span>
    $0
 <span class="org-keyword">END</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8c913c8" class="outline-4">
<h4 id="org8c913c8">Case</h4>
<div class="outline-text-4" id="text-org8c913c8">
<div class="org-src-container">
<pre class="src src-sql"><span class="org-keyword">CASE</span> <span class="org-comment-delimiter">/*</span><span class="org-comment">expression*/</span>
    <span class="org-keyword">WHEN</span> <span class="org-comment-delimiter">/*</span><span class="org-comment">expression*/</span> <span class="org-keyword">THEN</span> <span class="org-comment-delimiter">/*</span><span class="org-comment">result_expression*/</span>
    <span class="org-keyword">WHEN</span> <span class="org-comment-delimiter">/*</span><span class="org-comment">expression*/</span> <span class="org-keyword">THEN</span> <span class="org-comment-delimiter">/*</span><span class="org-comment">result_expression*/</span>
    <span class="org-keyword">ELSE</span> <span class="org-comment-delimiter">/*</span><span class="org-comment">result_expression*/</span>
<span class="org-keyword">END</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd7615af" class="outline-4">
<h4 id="orgd7615af">[cte] Common Table Expression</h4>
<div class="outline-text-4" id="text-orgd7615af">
<p>
Temporary inline view.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">WITH</span> cte fragment
# <span class="org-comment">--</span>
<span class="org-keyword">WITH</span> ${1:cte_name} <span class="org-keyword">AS</span>
(
    <span class="org-comment">-- SELECT</span>
    <span class="org-comment">-- FROM</span>
    <span class="org-comment">-- GROUP BY</span>
)
<span class="org-comment">-- Statement that executes the common table expression</span>
<span class="org-keyword">SELECT</span> $0
<span class="org-keyword">FROM</span> $1;
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org7fb255a" class="outline-3">
<h3 id="org7fb255a">Function</h3>
<div class="outline-text-3" id="text-org7fb255a">
<p>
Naming convention: functions are prefixed with <code>ufn</code>.
</p>
</div>

<div id="outline-container-orgca5454b" class="outline-4">
<h4 id="orgca5454b">[ctif] Create Inline Table Function</h4>
<div class="outline-text-4" id="text-orgca5454b">
<p>
Creates an inline table function.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Create</span> inline <span class="org-keyword">table</span>-va...
# <span class="org-comment">--</span>
<span class="org-keyword">IF</span> <span class="org-builtin">OBJECT_ID</span> (N<span class="org-string">'${1:[schema].[inline_function_name]}'</span>, N<span class="org-string">'IF'</span>) <span class="org-keyword">IS</span> <span class="org-keyword">NOT</span> <span class="org-keyword">NULL</span>
    <span class="org-keyword">DROP</span> <span class="org-keyword">FUNCTION</span> $1;
<span class="org-doc">go</span>

<span class="org-comment">-- ================================================</span>
<span class="org-doc">SET ANSI_NULLS ON</span>
<span class="org-doc">go</span>
<span class="org-doc">SET QUOTED_IDENTIFIER ON</span>
<span class="org-doc">go</span>
<span class="org-comment">-- =============================================</span>
<span class="org-comment">-- Author:      /* Author */</span>
<span class="org-comment">-- Create date: /* Create Date */</span>
<span class="org-comment">-- Description: /* Description */</span>
<span class="org-comment">-- =============================================</span>
<span class="org-keyword">CREATE</span> <span class="org-keyword">FUNCTION</span> $1 (<span class="org-variable-name">@</span>${2:<span class="org-keyword">parameter_name</span>} ${3:parameter_data_type})
<span class="org-keyword">RETURNS</span> <span class="org-keyword">TABLE</span>
<span class="org-comment">--WITH ENCRYPTION|SCHEMABINDING, ...</span>
<span class="org-keyword">AS</span>
<span class="org-keyword">RETURN</span>
(
    <span class="org-comment">-- Add the SELECT statement with parameter references here</span>
    <span class="org-keyword">SELECT</span> <span class="org-variable-name">@</span>$2 <span class="org-keyword">AS</span> c1
    $0
);
<span class="org-doc">go</span>

<span class="org-comment">-- =============================================</span>
<span class="org-comment">-- Example to execute function</span>
<span class="org-comment">-- =============================================</span>
<span class="org-keyword">SELECT</span> *
<span class="org-keyword">FROM</span> $1 <span class="org-comment-delimiter">/* </span><span class="org-comment">owner.inline_function_name */</span>
    (<span class="org-comment-delimiter">/* </span><span class="org-comment">value_for_@parameter_name */</span>)
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org68db96c" class="outline-4">
<h4 id="org68db96c">[ctf] Create Multi-Statement Table Function</h4>
<div class="outline-text-4" id="text-org68db96c">
<p>
Creates a multi-statement table function.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Create</span> multi-stateme...
# <span class="org-comment">--</span>
<span class="org-keyword">IF</span> <span class="org-builtin">OBJECT_ID</span> (N<span class="org-string">'${1:[schema].[table_function_name]}'</span>, N<span class="org-string">'TF'</span>) <span class="org-keyword">IS</span> <span class="org-keyword">NOT</span> <span class="org-keyword">NULL</span>
    <span class="org-keyword">DROP</span> <span class="org-keyword">FUNCTION</span> $1;
<span class="org-doc">go</span>

<span class="org-keyword">CREATE</span> <span class="org-keyword">FUNCTION</span> $1 (<span class="org-variable-name">@</span>{2:<span class="org-keyword">parameter_name</span>} ${3:parameter_data_type})
<span class="org-keyword">RETURNS</span> <span class="org-variable-name">@</span>${4:return_variable_name} <span class="org-keyword">TABLE</span>
(
    <span class="org-comment-delimiter">/* </span><span class="org-comment">table type definition */</span>
    $2 $3
)
<span class="org-comment">--WITH ENCRYPTION|SCHEMABINDING, ...</span>
<span class="org-keyword">AS</span>
<span class="org-keyword">BEGIN</span>
    <span class="org-comment-delimiter">/* </span><span class="org-comment">function body */</span>
    <span class="org-keyword">INSERT</span> <span class="org-variable-name">@</span>$4
    <span class="org-keyword">SELECT</span> 1
    <span class="org-keyword">RETURN</span>
<span class="org-keyword">END</span>;
<span class="org-doc">go</span>

<span class="org-comment">-- =============================================</span>
<span class="org-comment">-- Example to execute function</span>
<span class="org-comment">-- =============================================</span>
<span class="org-keyword">SELECT</span> * <span class="org-keyword">FROM</span> $1 <span class="org-comment-delimiter">/* </span><span class="org-comment">owner.table_function_name */</span>
    (<span class="org-comment-delimiter">/* </span><span class="org-comment">value_for_@parameter_name */</span>)
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7099cc6" class="outline-4">
<h4 id="org7099cc6">[csf] Create Scalar Function</h4>
<div class="outline-text-4" id="text-org7099cc6">
<p>
Creates a scalar function.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Create</span> scalar <span class="org-keyword">function</span>
# <span class="org-comment">--</span>
<span class="org-keyword">IF</span> <span class="org-builtin">OBJECT_ID</span> (N<span class="org-string">'${1:[schema].[scalar_function_name]}'</span>, N<span class="org-string">'FN'</span>) <span class="org-keyword">IS</span> <span class="org-keyword">NOT</span> <span class="org-keyword">NULL</span>
    <span class="org-keyword">DROP</span> <span class="org-keyword">FUNCTION</span> $1;
<span class="org-doc">go</span>

<span class="org-comment">-- =============================================</span>
<span class="org-doc">SET ANSI_NULLS ON</span>
<span class="org-doc">go</span>
<span class="org-doc">SET QUOTED_IDENTIFIER ON</span>
<span class="org-doc">go</span>
<span class="org-comment">-- =============================================</span>
<span class="org-comment">-- Author:      /* Author */</span>
<span class="org-comment">-- Create date: /* Create Date */</span>
<span class="org-comment">-- Description: /* Description */</span>
<span class="org-comment">-- =============================================</span>
<span class="org-keyword">CREATE</span> <span class="org-keyword">FUNCTION</span> $1 (<span class="org-variable-name">@</span>{2:<span class="org-keyword">parameter_name</span>} ${3:parameter_data_type})
<span class="org-keyword">RETURNS</span> ${4:function_data_type}
<span class="org-comment">--WITH ENCRYPTION|SCHEMABINDING, ...</span>
<span class="org-keyword">AS</span>
<span class="org-comment">-- Returns ...</span>
<span class="org-keyword">BEGIN</span>
    <span class="org-comment-delimiter">/* </span><span class="org-comment">function body */</span>
<span class="org-comment">--  eg.</span>
<span class="org-comment">--  DECLARE @v_ret $4</span>
<span class="org-comment">--  SELECT @v_ret = /* scalar expression */</span>
<span class="org-comment">--  RETURN @v_ret$0</span>
<span class="org-keyword">END</span>;
<span class="org-doc">go</span>

<span class="org-comment">-- =============================================</span>
<span class="org-comment">-- Example to execute function</span>
<span class="org-comment">-- =============================================</span>
<span class="org-keyword">SELECT</span> $1 <span class="org-comment-delimiter">/* </span><span class="org-comment">owner.scalar_function_name */</span>
    (<span class="org-comment-delimiter">/* </span><span class="org-comment">value_for_@parameter_name */</span>)
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1484f8f" class="outline-4">
<h4 id="org1484f8f">[af] Alter Function</h4>
<div class="outline-text-4" id="text-org1484f8f">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">ALTER</span> <span class="org-keyword">FUNCTION</span> fr...
# <span class="org-comment">--</span>
<span class="org-keyword">ALTER</span> <span class="org-keyword">FUNCTION</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-org4d20ae5" class="outline-4">
<h4 id="org4d20ae5">[dfn] Drop Function</h4>
<div class="outline-text-4" id="text-org4d20ae5">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Drop</span> <span class="org-keyword">function</span>
# <span class="org-comment">--</span>
<span class="org-keyword">DROP</span> <span class="org-keyword">FUNCTION</span> $0
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc8abff5" class="outline-3">
<h3 id="orgc8abff5">Index</h3>
<div class="outline-text-3" id="text-orgc8abff5">
</div>
<div id="outline-container-org9ddda54" class="outline-4">
<h4 id="org9ddda54">[cni] Create Non-Clustered Index</h4>
<div class="outline-text-4" id="text-org9ddda54">
<p>
Creates a basic, non-clustered index.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Create</span> non-<span class="org-keyword">unique</span> n...
# <span class="org-comment">--</span>
<span class="org-keyword">IF</span> <span class="org-keyword">EXISTS</span> (<span class="org-keyword">SELECT</span> <span class="org-keyword">name</span> <span class="org-keyword">FROM</span> sys.indexes <span class="org-keyword">WHERE</span> <span class="org-keyword">name</span> = N<span class="org-string">'${3:index_name}'</span>)
    <span class="org-keyword">DROP</span> <span class="org-keyword">INDEX</span> $3 <span class="org-keyword">ON</span> ${1:[<span class="org-keyword">schema</span>].[owner_name]};
<span class="org-doc">go</span>

<span class="org-keyword">CREATE</span> <span class="org-keyword">NONCLUSTERED</span> <span class="org-keyword">INDEX</span> $3
<span class="org-keyword">ON</span> $1 (${2:<span class="org-keyword">column</span>})
<span class="org-comment">--WITH PAD_INDEX</span>
<span class="org-comment">--    | FILLFACTOR = fillfactor</span>
<span class="org-comment">--    | IGNORE_DUP_KEY</span>
<span class="org-comment">--    | DROP_EXISTING</span>
<span class="org-comment">--    | STATISTICS_NORECOMPUTE</span>
<span class="org-comment">--    | SORT_IN_TEMPDB, .. as required</span>
<span class="org-comment">-- ON filegroup</span>
<span class="org-doc">go</span>
$0
</pre>
</div>
</div>
</div>

<div id="outline-container-org3d67704" class="outline-4">
<h4 id="org3d67704">[cuni] Create Unique Non-Clustered Index</h4>
<div class="outline-text-4" id="text-org3d67704">
<p>
Creates a unique, non-clustered index.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Create</span> <span class="org-keyword">unique</span> nonclu...
# <span class="org-comment">--</span>
<span class="org-keyword">IF</span> <span class="org-keyword">EXISTS</span> (<span class="org-keyword">SELECT</span> <span class="org-keyword">name</span> <span class="org-keyword">FROM</span> sys.indexes <span class="org-keyword">WHERE</span> <span class="org-keyword">name</span> = N<span class="org-string">'${3:index_name}'</span>)
    <span class="org-keyword">DROP</span> <span class="org-keyword">INDEX</span> $3 <span class="org-keyword">ON</span> ${1:[<span class="org-keyword">schema</span>].[owner_name]};
<span class="org-doc">go</span>

<span class="org-keyword">CREATE</span> <span class="org-keyword">UNIQUE</span> <span class="org-keyword">NONCLUSTERED</span> <span class="org-keyword">INDEX</span> $3
<span class="org-keyword">ON</span> $1 (${2:<span class="org-keyword">column</span>})
<span class="org-comment">--WITH</span>
<span class="org-comment">--    PAD_INDEX,</span>
<span class="org-comment">--    FILLFACTOR = fillfactor,</span>
<span class="org-comment">--    IGNORE_DUP_KEY,</span>
<span class="org-comment">--    DROP_EXISTING = OFF,</span>
<span class="org-comment">--    STATISTICS_NORECOMPUTE,</span>
<span class="org-comment">--    SORT_IN_TEMPDB = OFF, .. as required</span>
<span class="org-keyword">ON</span> ${3:<span class="org-builtin">filegroup_name</span>}
<span class="org-doc">go</span>
$0
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc0aa3b2" class="outline-4">
<h4 id="orgc0aa3b2">[cci] Create Clustered Index</h4>
<div class="outline-text-4" id="text-orgc0aa3b2">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Create</span> non-<span class="org-keyword">unique</span> cl...
# <span class="org-comment">--</span>
<span class="org-keyword">IF</span> <span class="org-keyword">EXISTS</span> (<span class="org-keyword">SELECT</span> <span class="org-keyword">name</span> <span class="org-keyword">FROM</span> sys.indexes <span class="org-keyword">WHERE</span> <span class="org-keyword">name</span> = N<span class="org-string">'${3:index_name}'</span>)
    <span class="org-keyword">DROP</span> <span class="org-keyword">INDEX</span> $3 <span class="org-keyword">ON</span> ${1:[<span class="org-keyword">schema</span>].[owner_name]};
<span class="org-doc">go</span>

<span class="org-keyword">CREATE</span> <span class="org-keyword">CLUSTERED</span> <span class="org-keyword">INDEX</span> $3
<span class="org-keyword">ON</span> $1 (${2:<span class="org-keyword">column</span>})
<span class="org-comment">--WITH PAD_INDEX</span>
<span class="org-comment">--    | FILLFACTOR = fillfactor</span>
<span class="org-comment">--    | IGNORE_DUP_KEY</span>
<span class="org-comment">--    | DROP_EXISTING</span>
<span class="org-comment">--    | STATISTICS_NORECOMPUTE</span>
<span class="org-comment">--    | SORT_IN_TEMPDB, .. as required</span>
<span class="org-comment">-- ON filegroup</span>
<span class="org-doc">go</span>
$0
</pre>
</div>
</div>
</div>

<div id="outline-container-org23bb178" class="outline-4">
<h4 id="org23bb178">[cuci] Create Unique Clustered Index</h4>
<div class="outline-text-4" id="text-org23bb178">
<p>
Create index full syntax.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Create</span> <span class="org-keyword">unique</span> cluster...
# <span class="org-comment">--</span>
<span class="org-keyword">IF</span> <span class="org-keyword">EXISTS</span> (<span class="org-keyword">SELECT</span> <span class="org-keyword">name</span> <span class="org-keyword">FROM</span> sys.indexes <span class="org-keyword">WHERE</span> <span class="org-keyword">name</span> = N<span class="org-string">'${3:index_name}'</span>)
    <span class="org-keyword">DROP</span> <span class="org-keyword">INDEX</span> $3 <span class="org-keyword">ON</span> ${1:[<span class="org-keyword">schema</span>].[owner_name]};
<span class="org-doc">go</span>

<span class="org-keyword">CREATE</span> <span class="org-keyword">UNIQUE</span> <span class="org-keyword">CLUSTERED</span> <span class="org-keyword">INDEX</span> $3
<span class="org-keyword">ON</span> $1 (${2:<span class="org-keyword">column</span>})
<span class="org-keyword">WITH</span>
PAD_INDEX,
<span class="org-keyword">FILLFACTOR</span> = ${3:fillfactor_value},
IGNORE_DUP_KEY,
DROP_EXISTING,
STATISTICS_NORECOMPUTE
<span class="org-comment">--    | SORT_IN_TEMPDB, .. as required</span>
<span class="org-keyword">ON</span> ${4:<span class="org-builtin">filegroup_name</span>}
<span class="org-doc">go</span>
$0
</pre>
</div>
</div>
</div>

<div id="outline-container-org6811af2" class="outline-4">
<h4 id="org6811af2">[di] Drop Index</h4>
<div class="outline-text-4" id="text-org6811af2">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Drop</span> <span class="org-keyword">index</span>
# <span class="org-comment">--</span>
<span class="org-keyword">DROP</span> <span class="org-keyword">INDEX</span> $0
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org2d70954" class="outline-3">
<h3 id="org2d70954">Join fragment</h3>
<div class="outline-text-3" id="text-org2d70954">
</div>
<div id="outline-container-orga0b8552" class="outline-4">
<h4 id="orga0b8552">[cj] Cross Join</h4>
<div class="outline-text-4" id="text-orga0b8552">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">CROSS</span> <span class="org-keyword">JOIN</span> fragment
# <span class="org-comment">--</span>
<span class="org-keyword">CROSS</span> <span class="org-keyword">JOIN</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdcfed0b" class="outline-4">
<h4 id="orgdcfed0b">[fj] Full Join</h4>
<div class="outline-text-4" id="text-orgdcfed0b">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">FULL</span> <span class="org-keyword">JOIN</span> fragment
# <span class="org-comment">--</span>
<span class="org-keyword">FULL</span> <span class="org-keyword">JOIN</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-org7cd1812" class="outline-4">
<h4 id="org7cd1812">[foj] Full Outer Join</h4>
<div class="outline-text-4" id="text-org7cd1812">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">FULL</span> <span class="org-keyword">OUTER</span> <span class="org-keyword">JOIN</span> fr...
# <span class="org-comment">--</span>
<span class="org-keyword">FULL</span> <span class="org-keyword">OUTER</span> <span class="org-keyword">JOIN</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb9b9a7b" class="outline-4">
<h4 id="orgb9b9a7b">[ij] Inner Join</h4>
<div class="outline-text-4" id="text-orgb9b9a7b">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">INNER</span> <span class="org-keyword">JOIN</span> fragment
# <span class="org-comment">--</span>
<span class="org-keyword">INNER</span> <span class="org-keyword">JOIN</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-org7c8e1f5" class="outline-4">
<h4 id="org7c8e1f5">[j] Join</h4>
<div class="outline-text-4" id="text-org7c8e1f5">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">JOIN</span> fragment
# <span class="org-comment">--</span>
<span class="org-keyword">JOIN</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-org810518d" class="outline-4">
<h4 id="org810518d">[lj] Left Join</h4>
<div class="outline-text-4" id="text-org810518d">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">LEFT</span> <span class="org-keyword">JOIN</span> fragment
# <span class="org-comment">--</span>
<span class="org-keyword">LEFT</span> <span class="org-keyword">JOIN</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb551949" class="outline-4">
<h4 id="orgb551949">[loj] Left Outer Join</h4>
<div class="outline-text-4" id="text-orgb551949">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">LEFT</span> <span class="org-keyword">OUTER</span> <span class="org-keyword">JOIN</span> fr...
# <span class="org-comment">--</span>
<span class="org-keyword">LEFT</span> <span class="org-keyword">OUTER</span> <span class="org-keyword">JOIN</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc44eaf0" class="outline-4">
<h4 id="orgc44eaf0">[rj] Right Join</h4>
<div class="outline-text-4" id="text-orgc44eaf0">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">RIGHT</span> <span class="org-keyword">JOIN</span> fragment
# <span class="org-comment">--</span>
<span class="org-keyword">RIGHT</span> <span class="org-keyword">JOIN</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-org552fa11" class="outline-4">
<h4 id="org552fa11">[roj] Right Outer Join</h4>
<div class="outline-text-4" id="text-org552fa11">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">RIGHT</span> <span class="org-keyword">OUTER</span> <span class="org-keyword">JOIN</span> f...
# <span class="org-comment">--</span>
<span class="org-keyword">RIGHT</span> <span class="org-keyword">OUTER</span> <span class="org-keyword">JOIN</span> $0
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd581fe5" class="outline-3">
<h3 id="orgd581fe5">Login</h3>
<div class="outline-text-3" id="text-orgd581fe5">
</div>
<div id="outline-container-org1d9b3b6" class="outline-4">
<h4 id="org1d9b3b6">[cl] Create SQL Authentication Login</h4>
<div class="outline-text-4" id="text-org1d9b3b6">
<p>
Creates a SQL Server Authentication login.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">CREATE</span> <span class="org-keyword">SQL</span> Server l...
# <span class="org-comment">--</span>
<span class="org-keyword">CREATE</span> LOGIN ${1:SQL_login_name}
<span class="org-keyword">WITH</span> PASSWORD = N<span class="org-string">'${2:Strong_P@ssword}'</span>$0 <span class="org-comment-delimiter">/* </span><span class="org-comment">HASHED */</span> <span class="org-comment-delimiter">/* </span><span class="org-comment">MUST_CHANGE */</span>
<span class="org-comment">--  DEFAULT_DATABASE = database</span>
<span class="org-comment">--  DEFAULT_LANGUAGE = language</span>
<span class="org-comment">--  CHECK_POLICY = ON | OFF</span>
<span class="org-comment">--  SID = sid</span>
<span class="org-comment">--  CHECK_EXPIRATION = ON | OFF</span>
<span class="org-comment">--  CREDENTIAL = credential_name</span>
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2776029" class="outline-4">
<h4 id="org2776029">Create Windows Authentication Login</h4>
<div class="outline-text-4" id="text-org2776029">
<p>
Creates a Windows Authentication login.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">CREATE</span> Windows l...
# <span class="org-comment">--</span>
<span class="org-keyword">CREATE</span> LOGIN ${1:[domain_name\<span class="org-builtin">user_name</span>]}
<span class="org-keyword">FROM</span> WINDOWS$0
<span class="org-keyword">WITH</span>
DEFAULT_DATABASE = ${2:default_database}
<span class="org-comment">--  DEFAULT_LANGUAGE = language</span>
<span class="org-comment">--  CERTIFICATE certificate_name</span>
<span class="org-comment">--  ASYMMETRIC KEY key_name</span>
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbc65893" class="outline-4">
<h4 id="orgbc65893">[dl] Drop Login</h4>
<div class="outline-text-4" id="text-orgbc65893">
<p>
Drop login.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Drop</span> login
# <span class="org-comment">--</span>
<span class="org-keyword">DROP</span> LOGIN ${1:SQL_login_name}
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgfe08781" class="outline-3">
<h3 id="orgfe08781">Role</h3>
<div class="outline-text-3" id="text-orgfe08781">
</div>
<div id="outline-container-orgef96395" class="outline-4">
<h4 id="orgef96395">Create Role</h4>
<div class="outline-text-4" id="text-orgef96395">
<p>
Create Database Role.
</p>

<div class="org-src-container">
<pre class="src src-sql"><span class="org-doc">USE ${1:database_name}</span>
<span class="org-doc">go</span>

<span class="org-keyword">CREATE</span> <span class="org-keyword">ROLE</span> ${2:role_name}$0
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org7f454d4" class="outline-3">
<h3 id="org7f454d4">Schema</h3>
<div class="outline-text-3" id="text-org7f454d4">
</div>
<div id="outline-container-org55eb3cb" class="outline-4">
<h4 id="org55eb3cb">Create Schema</h4>
<div class="outline-text-4" id="text-org55eb3cb">
<p>
Create a database schema.
</p>

<div class="org-src-container">
<pre class="src src-sql"><span class="org-keyword">CREATE</span> <span class="org-keyword">SCHEMA</span> ${1:<span class="org-keyword">schema</span>}$0
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orge4f8954" class="outline-3">
<h3 id="orge4f8954">Set options</h3>
<div class="outline-text-3" id="text-orge4f8954">
</div>
<div id="outline-container-org4b8c6da" class="outline-4">
<h4 id="org4b8c6da">[san] Set ANSI_NULLS</h4>
<div class="outline-text-4" id="text-org4b8c6da">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: Change the <span class="org-keyword">current</span> A...
# <span class="org-comment">--</span>
<span class="org-doc">SET ANSI_NULLS ON$0</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb00a3bf" class="outline-4">
<h4 id="orgb00a3bf">[sqi] Set QUOTED_IDENTIFIER</h4>
<div class="outline-text-4" id="text-orgb00a3bf">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: Change the <span class="org-keyword">current</span> ...
# <span class="org-comment">--</span>
<span class="org-doc">SET QUOTED_IDENTIFIER ON$0</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8143b13" class="outline-4">
<h4 id="org8143b13">[sxa] Set XACT_ABORT</h4>
<div class="outline-text-4" id="text-org8143b13">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: Change the <span class="org-keyword">current</span> X...
# <span class="org-comment">--</span>
<span class="org-doc">SET XACT_ABORT OFF$0</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org619c36d" class="outline-3">
<h3 id="org619c36d">Stored Procedure</h3>
<div class="outline-text-3" id="text-org619c36d">
<p>
Naming convention: stored procedures are prefixed with <code>usp</code>.
</p>
</div>

<div id="outline-container-orgd73ef3f" class="outline-4">
<h4 id="orgd73ef3f">[cp] Create Procedure Basic Template</h4>
<div class="outline-text-4" id="text-orgd73ef3f">
<p>
Create a simple stored procedure with output parameter.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Create</span> stored proced...
# <span class="org-comment">--</span>
<span class="org-comment">-- Drop stored procedure if it already exists</span>
<span class="org-keyword">IF</span> <span class="org-builtin">OBJECT_ID</span> (<span class="org-string">'${1:[schema].[procedure_name]}'</span>, <span class="org-string">'P'</span>) <span class="org-keyword">IS</span> <span class="org-keyword">NOT</span> <span class="org-keyword">NULL</span>
    <span class="org-keyword">DROP</span> <span class="org-keyword">PROCEDURE</span> $1;
<span class="org-doc">go</span>

<span class="org-comment">-- =============================================</span>
<span class="org-doc">SET ANSI_NULLS ON</span>
<span class="org-doc">go</span>
<span class="org-doc">SET QUOTED_IDENTIFIER ON</span>
<span class="org-doc">go</span>
<span class="org-comment">-- =============================================</span>
<span class="org-comment">-- Author:      /* Author */</span>
<span class="org-comment">-- Create date: /* Create Date */</span>
<span class="org-comment">-- Description: /* Description */</span>
<span class="org-comment">-- =============================================</span>
<span class="org-keyword">CREATE</span> <span class="org-keyword">PROCEDURE</span> $1
    <span class="org-comment">-- Add the parameters for the function here</span>
    <span class="org-variable-name">@</span>${2:parameter_name_1} ${3:parameter_data_type_1} = ${4:default_value_for_parameter_1}
    <span class="org-variable-name">@</span>${5:parameter_name_2} ${6:parameter_data_type_2} <span class="org-keyword">OUTPUT</span>
<span class="org-comment">-- WITH ENCRYPTION, RECOMPILE, EXECUTE AS CALLER|SELF|OWNER| 'user_name'</span>
<span class="org-keyword">AS</span>
<span class="org-keyword">BEGIN</span>
    <span class="org-comment">-- SET NOCOUNT ON added to prevent extra result sets from</span>
    <span class="org-comment">-- interfering with SELECT statements.</span>
    <span class="org-keyword">SET</span> NOCOUNT <span class="org-keyword">ON</span>;

    <span class="org-comment">-- Insert statements for procedure here</span>
    <span class="org-keyword">SELECT</span> <span class="org-variable-name">@</span>$2$0
<span class="org-keyword">END</span>
<span class="org-doc">go</span>

<span class="org-comment">--SET QUOTED_IDENTIFIER ON|OFF</span>
<span class="org-comment">--SET ANSI_NULLS ON|OFF</span>
<span class="org-comment">--go</span>

<span class="org-comment">-- =============================================</span>
<span class="org-comment">-- Example to execute the stored procedure</span>
<span class="org-comment">-- =============================================</span>
<span class="org-keyword">DECLARE</span> <span class="org-variable-name">@</span>${7:variable_for_output_parameter} $6

<span class="org-keyword">EXECUTE</span> $1 <span class="org-comment-delimiter">/* </span><span class="org-comment">value_for_parameter_1 */</span>, $7 <span class="org-keyword">OUTPUT</span>

<span class="org-keyword">SELECT</span> $7
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgff1c590" class="outline-4">
<h4 id="orgff1c590">[crlp] Create CLR Procedure</h4>
<div class="outline-text-4" id="text-orgff1c590">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Create</span> CLR stored pr...
# <span class="org-comment">--</span>
<span class="org-comment">--SET QUOTED_IDENTIFIER ON|OFF</span>
<span class="org-comment">--SET ANSI_NULLS ON|OFF</span>
<span class="org-comment">--go</span>

<span class="org-keyword">CREATE</span> <span class="org-keyword">PROCEDURE</span> ${1:[<span class="org-keyword">schema</span>].[procedure_name]}
(
    <span class="org-variable-name">@</span>${2:<span class="org-keyword">parameter_name</span>} ${3:parameter_data_type}
)
<span class="org-comment">-- WITH EXECUTE AS CALLER|SELF|OWNER| 'user_name'</span>
<span class="org-keyword">AS</span> <span class="org-keyword">EXTERNAL</span> <span class="org-keyword">NAME</span> ${4:[assembly].[<span class="org-keyword">class</span>].[<span class="org-keyword">method</span>]};
<span class="org-doc">go</span>

<span class="org-comment">--SET QUOTED_IDENTIFIER ON|OFF</span>
<span class="org-comment">--SET ANSI_NULLS ON|OFF</span>
<span class="org-comment">--go$0</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org949c510" class="outline-4">
<h4 id="org949c510">[ap] Alter Procedure</h4>
<div class="outline-text-4" id="text-org949c510">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">ALTER</span> <span class="org-keyword">PROCEDURE</span>
# <span class="org-comment">--</span>
<span class="org-keyword">ALTER</span> <span class="org-keyword">PROCEDURE</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-org3f20399" class="outline-4">
<h4 id="org3f20399">[dp] Drop Procedure</h4>
<div class="outline-text-4" id="text-org3f20399">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Drop</span> stored <span class="org-keyword">procedure</span>
# <span class="org-comment">--</span>
<span class="org-keyword">DROP</span> <span class="org-keyword">PROCEDURE</span> $0
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd7d56ba" class="outline-3">
<h3 id="orgd7d56ba">Synonym</h3>
<div class="outline-text-3" id="text-orgd7d56ba">
</div>
<div id="outline-container-orgf1c01b3" class="outline-4">
<h4 id="orgf1c01b3">Create Synonym</h4>
<div class="outline-text-4" id="text-orgf1c01b3">
<p>
Creates a synonym.
</p>

<div class="org-src-container">
<pre class="src src-sql"><span class="org-keyword">CREATE</span> SYNONYM ${1:[<span class="org-keyword">schema</span>].[synonym_name]}
<span class="org-keyword">FOR</span> ${2:[<span class="org-keyword">schema</span>].[<span class="org-builtin">object_name</span>]};
<span class="org-doc">go$0</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org9a2a7a3" class="outline-3">
<h3 id="org9a2a7a3">Table</h3>
<div class="outline-text-3" id="text-org9a2a7a3">
</div>
<div id="outline-container-org557cee5" class="outline-4">
<h4 id="org557cee5">[ct] Create Table</h4>
<div class="outline-text-4" id="text-org557cee5">
<p>
Creates a table (and drop previous one with the same name).
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Create</span> <span class="org-keyword">table</span>
# <span class="org-comment">--</span>
<span class="org-keyword">IF</span> <span class="org-builtin">OBJECT_ID</span> (<span class="org-string">'${1:[schema].[table_name]}'</span>, <span class="org-string">'U'</span>) <span class="org-keyword">IS</span> <span class="org-keyword">NOT</span> <span class="org-keyword">NULL</span>
    <span class="org-keyword">DROP</span> <span class="org-keyword">TABLE</span> $1;
<span class="org-doc">go</span>

<span class="org-keyword">CREATE</span> <span class="org-keyword">TABLE</span> $1
(
    ${2:column_1} ${3:data_type_1} ${4:column_nullability_1},
    ${5:column_2} ${6:data_type_2} ${5:column_nullability_2},$0
    <span class="org-keyword">CONSTRAINT</span> <span class="org-comment-delimiter">/* </span><span class="org-comment">contraint_name */</span> <span class="org-keyword">PRIMARY</span> <span class="org-keyword">KEY</span> (<span class="org-comment-delimiter">/* </span><span class="org-comment">columns_in_primary_key */</span>)
);
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge5efda1" class="outline-4">
<h4 id="orge5efda1">[at] Alter Table fragment</h4>
<div class="outline-text-4" id="text-orge5efda1">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">ALTER</span> <span class="org-keyword">TABLE</span> fragm...
# <span class="org-comment">--</span>
<span class="org-keyword">ALTER</span> <span class="org-keyword">TABLE</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-org3b9b611" class="outline-4">
<h4 id="org3b9b611">[ata] Add Column</h4>
<div class="outline-text-4" id="text-org3b9b611">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Add</span> <span class="org-keyword">column</span>
# <span class="org-comment">--</span>
<span class="org-keyword">ALTER</span> <span class="org-keyword">TABLE</span> ${1:[<span class="org-keyword">schema</span>].[<span class="org-keyword">table_name</span>]} <span class="org-keyword">ADD</span> [${2:<span class="org-keyword">column_name</span>}] ${3:data_type} ${4:column_nullability};
<span class="org-doc">go$0</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2d5ab63" class="outline-4">
<h4 id="org2d5ab63">[atac] modify Column</h4>
<div class="outline-text-4" id="text-org2d5ab63">
<div class="warning">
<p>
Running <code>ALTER COLUMN</code> without mentioning attribute <code>NOT NULL</code> will result in the
column being changed to <b>nullable</b>, if it is already not.
</p>

</div>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Modify</span> <span class="org-keyword">column</span>
# <span class="org-comment">--</span>
<span class="org-comment">-- WARNING: If the column is not nullable, specify attribute NOT NULL.</span>
<span class="org-keyword">ALTER</span> <span class="org-keyword">TABLE</span> ${1:[<span class="org-keyword">schema</span>].[<span class="org-keyword">table_name</span>]} <span class="org-keyword">ALTER</span> <span class="org-keyword">COLUMN</span> $0;
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbced7e2" class="outline-4">
<h4 id="orgbced7e2">[atd] Drop column</h4>
<div class="outline-text-4" id="text-orgbced7e2">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Drop</span> <span class="org-keyword">column</span>
# <span class="org-comment">--</span>
<span class="org-keyword">ALTER</span> <span class="org-keyword">TABLE</span> ${1:[<span class="org-keyword">schema</span>].[<span class="org-keyword">table_name</span>]} <span class="org-keyword">DROP</span> <span class="org-keyword">COLUMN</span> $0;
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7ca9c45" class="outline-4">
<h4 id="org7ca9c45">Add Constraint</h4>
<div class="outline-text-4" id="text-org7ca9c45">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Add</span> <span class="org-keyword">constraint</span>
# <span class="org-comment">--</span>
<span class="org-keyword">ALTER</span> <span class="org-keyword">TABLE</span> ${1:[<span class="org-keyword">schema</span>].[<span class="org-keyword">table_name</span>]}
<span class="org-keyword">ADD</span> <span class="org-keyword">CONSTRAINT</span> ${2:<span class="org-keyword">constraint_name</span>};
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9265bcc" class="outline-4">
<h4 id="org9265bcc">[atdc] Drop Constraint</h4>
<div class="outline-text-4" id="text-org9265bcc">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Drop</span> <span class="org-keyword">constraint</span>
# <span class="org-comment">--</span>
<span class="org-keyword">ALTER</span> <span class="org-keyword">TABLE</span> ${1:[<span class="org-keyword">schema</span>].[<span class="org-keyword">table_name</span>]}
<span class="org-keyword">DROP</span> <span class="org-keyword">CONSTRAINT</span> ${2:<span class="org-keyword">constraint_name</span>};
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org447c143" class="outline-4">
<h4 id="org447c143">[dt] Drop Table</h4>
<div class="outline-text-4" id="text-org447c143">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Drop</span> <span class="org-keyword">table</span>
# <span class="org-comment">--</span>

<span class="org-keyword">IF</span> <span class="org-keyword">EXISTS</span> (<span class="org-keyword">SELECT</span> *
             <span class="org-keyword">FROM</span> sys.tables
             <span class="org-keyword">JOIN</span> sys.schemas
               <span class="org-keyword">ON</span> sys.tables.schema_id = sys.schemas.schema_id
            <span class="org-keyword">WHERE</span> sys.schemas.<span class="org-keyword">name</span> = N<span class="org-string">'${1:schema}'</span>
              <span class="org-keyword">AND</span> sys.tables.<span class="org-keyword">name</span> = N<span class="org-string">'${2:table}'</span>)
    <span class="org-keyword">DROP</span> <span class="org-keyword">TABLE</span> $1.$2
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org005dba5" class="outline-3">
<h3 id="org005dba5">Transaction</h3>
<div class="outline-text-3" id="text-org005dba5">
</div>
<div id="outline-container-org2e24c35" class="outline-4">
<h4 id="org2e24c35">[bt] Begin Transaction</h4>
<div class="outline-text-4" id="text-org2e24c35">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Begin</span> <span class="org-keyword">transaction</span>
# <span class="org-comment">--</span>
<span class="org-keyword">BEGIN</span> <span class="org-keyword">TRANSACTION</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd2138aa" class="outline-4">
<h4 id="orgd2138aa">[ctr] Commit Transaction</h4>
<div class="outline-text-4" id="text-orgd2138aa">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Commit</span> <span class="org-keyword">transaction</span>
# <span class="org-comment">--</span>
<span class="org-keyword">COMMIT</span> <span class="org-keyword">TRANSACTION</span> $0
</pre>
</div>
</div>
</div>

<div id="outline-container-org15cdc77" class="outline-4">
<h4 id="org15cdc77">[rt] Rollback Transaction</h4>
<div class="outline-text-4" id="text-org15cdc77">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Rollback</span> <span class="org-keyword">transaction</span>
# <span class="org-comment">--</span>
<span class="org-keyword">ROLLBACK</span> <span class="org-keyword">TRANSACTION</span> $0
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orga9ce16e" class="outline-3">
<h3 id="orga9ce16e">Trigger</h3>
<div class="outline-text-3" id="text-orga9ce16e">
</div>
<div id="outline-container-org34a8e32" class="outline-4">
<h4 id="org34a8e32">Create Trigger</h4>
<div class="outline-text-4" id="text-org34a8e32">
<p>
Creates a trigger.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Create</span> <span class="org-keyword">trigger</span>
# <span class="org-comment">--</span>
<span class="org-keyword">IF</span> <span class="org-builtin">OBJECT_ID</span> (<span class="org-string">'${1:trigger_name}'</span>, <span class="org-string">'TR'</span>) <span class="org-keyword">IS</span> <span class="org-keyword">NOT</span> <span class="org-keyword">NULL</span>
    <span class="org-keyword">DROP</span> <span class="org-keyword">TRIGGER</span> $1;
<span class="org-doc">go</span>

<span class="org-comment">-- =============================================</span>
<span class="org-doc">SET ANSI_NULLS ON</span>
<span class="org-doc">go</span>
<span class="org-doc">SET QUOTED_IDENTIFIER ON</span>
<span class="org-doc">go</span>
<span class="org-comment">-- =============================================</span>
<span class="org-comment">-- Author:      /* Author */</span>
<span class="org-comment">-- Create date: /* Create Date */</span>
<span class="org-comment">-- Description: /* Description */</span>
<span class="org-comment">-- =============================================</span>
<span class="org-keyword">CREATE</span> <span class="org-keyword">TRIGGER</span> $1
<span class="org-keyword">ON</span> ${2:[<span class="org-keyword">schema</span>].[<span class="org-keyword">table_name</span>]}
<span class="org-keyword">FOR</span> <span class="org-keyword">INSERT</span>, <span class="org-keyword">UPDATE</span>, <span class="org-keyword">DELETE</span>
<span class="org-keyword">AS</span>
<span class="org-keyword">BEGIN</span>
    <span class="org-comment">-- SET NOCOUNT ON added to prevent extra result sets from</span>
    <span class="org-comment">-- interfering with SELECT statements.</span>
    <span class="org-keyword">SET</span> NOCOUNT <span class="org-keyword">ON</span>;

    <span class="org-comment">-- Insert statements for trigger here</span>
    <span class="org-keyword">RAISERROR</span> (50009, 16, 10)
    $0
<span class="org-keyword">END</span>;
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd673fad" class="outline-4">
<h4 id="orgd673fad">Enable Trigger</h4>
<div class="outline-text-4" id="text-orgd673fad">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: Enable <span class="org-keyword">trigger</span>
# <span class="org-comment">--</span>
<span class="org-keyword">ALTER</span> <span class="org-keyword">TABLE</span> ${1:[<span class="org-keyword">schema</span>].[<span class="org-keyword">table_name</span>]} ENABLE <span class="org-keyword">TRIGGER</span> $0;
</pre>
</div>
</div>
</div>

<div id="outline-container-org365bf26" class="outline-4">
<h4 id="org365bf26">Enable All Triggers</h4>
<div class="outline-text-4" id="text-org365bf26">
<p>
Enable all triggers on table.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: Enable <span class="org-keyword">all</span> triggers <span class="org-keyword">on</span>...
# <span class="org-comment">--</span>
<span class="org-keyword">ALTER</span> <span class="org-keyword">TABLE</span> ${1:[<span class="org-keyword">schema</span>].[<span class="org-keyword">table_name</span>]}$0 ENABLE <span class="org-keyword">TRIGGER</span> <span class="org-keyword">ALL</span>;
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7464613" class="outline-4">
<h4 id="org7464613">Disable Trigger</h4>
<div class="outline-text-4" id="text-org7464613">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: Disable <span class="org-keyword">trigger</span>
# <span class="org-comment">--</span>
<span class="org-keyword">ALTER</span> <span class="org-keyword">TABLE</span> ${1:[<span class="org-keyword">schema</span>].[<span class="org-keyword">table_name</span>]} DISABLE <span class="org-keyword">TRIGGER</span> $0;
</pre>
</div>
</div>
</div>

<div id="outline-container-org7f7f5d1" class="outline-4">
<h4 id="org7f7f5d1">Disable All Triggers</h4>
<div class="outline-text-4" id="text-org7f7f5d1">
<p>
Disable all triggers on table.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: Disable <span class="org-keyword">all</span> triggers <span class="org-keyword">on</span>...
# <span class="org-comment">--</span>
<span class="org-keyword">ALTER</span> <span class="org-keyword">TABLE</span> ${1:[<span class="org-keyword">schema</span>].[<span class="org-keyword">table_name</span>]}$0 DISABLE <span class="org-keyword">TRIGGER</span> <span class="org-keyword">ALL</span>;
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org07ff86b" class="outline-3">
<h3 id="org07ff86b">User</h3>
<div class="outline-text-3" id="text-org07ff86b">
</div>
<div id="outline-container-org118ae46" class="outline-4">
<h4 id="org118ae46">[cu] Create User</h4>
<div class="outline-text-4" id="text-org118ae46">
<p>
Creates a database user.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Create</span> <span class="org-keyword">database</span> <span class="org-keyword">user</span>
# <span class="org-comment">--</span>
<span class="org-keyword">CREATE</span> <span class="org-keyword">USER</span> ${1:UserName}$0
<span class="org-keyword">FOR</span> <span class="org-comment-delimiter">/* </span><span class="org-comment">FROM */</span> LOGIN <span class="org-comment-delimiter">/* </span><span class="org-comment">login_name */</span>
<span class="org-comment">--  CERTIFICATE certificate_name</span>
<span class="org-comment">--  ASYMMETRIC KEY key_name</span>
<span class="org-comment">--  WITHOUT LOGIN</span>
<span class="org-comment">--  WITH DEFAULT_SCHEMA = schema_name</span>
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org05821cf" class="outline-4">
<h4 id="org05821cf">[du] Drop User</h4>
<div class="outline-text-4" id="text-org05821cf">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Drop</span> <span class="org-keyword">user</span>
# <span class="org-comment">--</span>
<span class="org-keyword">DROP</span> <span class="org-keyword">USER</span> ${1:<span class="org-builtin">user_name</span>}
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org7a01e3d" class="outline-3">
<h3 id="org7a01e3d">User Defined Data Type</h3>
<div class="outline-text-3" id="text-org7a01e3d">
</div>
<div id="outline-container-org4abba64" class="outline-4">
<h4 id="org4abba64">Create User-Defined Data Type</h4>
<div class="outline-text-4" id="text-org4abba64">
<p>
Creates a user-defined data type.
</p>

<div class="org-src-container">
<pre class="src src-sql"><span class="org-keyword">CREATE</span> <span class="org-keyword">TYPE</span> ${1:[<span class="org-keyword">schema</span>].[my_data_type]}
<span class="org-keyword">FROM</span> ${2:data_type} ${3:column_nullability}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgef2daed" class="outline-3">
<h3 id="orgef2daed">User Defined Table Type</h3>
<div class="outline-text-3" id="text-orgef2daed">
</div>
<div id="outline-container-org289b987" class="outline-4">
<h4 id="org289b987">Create User-Defined Table Type</h4>
<div class="outline-text-4" id="text-org289b987">
<p>
Creates a user-defined table type.
</p>

<div class="org-src-container">
<pre class="src src-sql"><span class="org-keyword">CREATE</span> <span class="org-keyword">TYPE</span> ${1:[<span class="org-keyword">schema</span>].[my_table_type]} <span class="org-keyword">AS</span> <span class="org-keyword">TABLE</span>
(
    ${2:column_1} ${3:data_type_1},
    ${4:column_2} ${5:data_type_2}
);
<span class="org-doc">go$0</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org0f0fe4a" class="outline-3">
<h3 id="org0f0fe4a">User Defined Type</h3>
<div class="outline-text-3" id="text-org0f0fe4a">
</div>
<div id="outline-container-org1fbed0d" class="outline-4">
<h4 id="org1fbed0d">Create User-Defined Type</h4>
<div class="outline-text-4" id="text-org1fbed0d">
<p>
Creates a CLR integration user-defined type.
</p>

<div class="org-src-container">
<pre class="src src-sql"><span class="org-keyword">CREATE</span> <span class="org-keyword">TYPE</span> ${1:Utf8String}
<span class="org-keyword">EXTERNAL</span> <span class="org-keyword">NAME</span> ${2:utf8string}.${3:[Microsoft.Samples.SqlServer.utf8string]};
<span class="org-doc">go$0</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org9c948c3" class="outline-3">
<h3 id="org9c948c3">View</h3>
<div class="outline-text-3" id="text-org9c948c3">
</div>
<div id="outline-container-org72f133d" class="outline-4">
<h4 id="org72f133d">[cv] Create View</h4>
<div class="outline-text-4" id="text-org72f133d">
<p>
Creates a view.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Create</span> <span class="org-keyword">view</span>
# <span class="org-comment">--</span>
<span class="org-keyword">IF</span> <span class="org-builtin">OBJECT_ID</span> (<span class="org-string">'${1:[schema].[view_name]}'</span>, <span class="org-string">'V'</span>) <span class="org-keyword">IS</span> <span class="org-keyword">NOT</span> <span class="org-keyword">NULL</span>
    <span class="org-keyword">DROP</span> <span class="org-keyword">VIEW</span> $1;
<span class="org-doc">go</span>

<span class="org-keyword">CREATE</span> <span class="org-keyword">VIEW</span> $1
<span class="org-comment">--WITH ENCRYPTION, SCHEMABINDING, VIEW_METADATA</span>
<span class="org-keyword">AS</span>
    <span class="org-keyword">SELECT</span> *
    <span class="org-keyword">FROM</span> ${2:[<span class="org-keyword">schema</span>].[sample_table]}
    $0
<span class="org-comment">-- WITH CHECK OPTION</span>
<span class="org-doc">go</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4f4572f" class="outline-4">
<h4 id="org4f4572f">[dv] Drop View</h4>
<div class="outline-text-4" id="text-org4f4572f">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Drop</span> <span class="org-keyword">view</span>
# <span class="org-comment">--</span>
<span class="org-keyword">DROP</span> <span class="org-keyword">VIEW</span> $0
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgde574bf" class="outline-3">
<h3 id="orgde574bf">&#x2014; Miscellaneous ---</h3>
<div class="outline-text-3" id="text-orgde574bf">
</div>
<div id="outline-container-org8160352" class="outline-4">
<h4 id="org8160352">[sph] sp_help</h4>
<div class="outline-text-4" id="text-org8160352">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Execute</span> sp_help
# <span class="org-comment">--</span>
<span class="org-keyword">EXEC</span> sp_help$0
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc5fd3b3" class="outline-4">
<h4 id="orgc5fd3b3">[spt] sp_helptext</h4>
<div class="outline-text-4" id="text-orgc5fd3b3">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Execute</span> sp_helptext
# <span class="org-comment">--</span>
<span class="org-keyword">EXEC</span> sp_helptext$0
</pre>
</div>
</div>
</div>

<div id="outline-container-org39dca7b" class="outline-4">
<h4 id="org39dca7b">[xpfd] xp_fixeddrives</h4>
<div class="outline-text-4" id="text-org39dca7b">
<p>
Retrieve free space on all fixed drives.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: Retrieve <span class="org-keyword">free</span> <span class="org-builtin">space</span> o...
# <span class="org-comment">--</span>
<span class="org-keyword">EXEC</span> master..xp_fixeddrives
</pre>
</div>
</div>
</div>

<div id="outline-container-org4af0c13" class="outline-4">
<h4 id="org4af0c13">[w2] Who2</h4>
<div class="outline-text-4" id="text-org4af0c13">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-keyword">Execute</span> sp_who2$0
# <span class="org-comment">--</span>
<span class="org-keyword">EXEC</span> sp_who2$0
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfeb5943" class="outline-4">
<h4 id="orgfeb5943">[err] @@ERROR</h4>
<div class="outline-text-4" id="text-orgfeb5943">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: <span class="org-builtin">@@ERROR</span> <span class="org-keyword">function</span> ...
# <span class="org-comment">--</span>
<span class="org-builtin">@@ERROR</span>$0
</pre>
</div>
</div>
</div>

<div id="outline-container-org53a390f" class="outline-4">
<h4 id="org53a390f">[mro] Most Recent Objects</h4>
<div class="outline-text-4" id="text-org53a390f">
<p>
Retrieve 20 most recently created objects.
</p>

<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: Retrieve 20 most rec...
# <span class="org-comment">--</span>
<span class="org-keyword">SELECT</span> <span class="org-keyword">TOP</span> 20 [<span class="org-keyword">name</span>], [<span class="org-keyword">type</span>], crdate
<span class="org-keyword">FROM</span> sysobjects
<span class="org-keyword">ORDER</span> <span class="org-keyword">BY</span> crdate <span class="org-keyword">DESC</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf07ac21" class="outline-4">
<h4 id="orgf07ac21">Comment</h4>
<div class="outline-text-4" id="text-orgf07ac21">
<p>
A comment block.
</p>

<div class="org-src-container">
<pre class="src src-sql"><span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * $0</span>
<span class="org-comment"> */</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org09b784a" class="outline-4">
<h4 id="org09b784a">Comment</h4>
<div class="outline-text-4" id="text-org09b784a">
<p>
A multiline comment block.
</p>

<div class="org-src-container">
<pre class="src src-sql"><span class="org-comment-delimiter">/*******************************************</span>
<span class="org-comment"> * $0</span>
<span class="org-comment"> *******************************************/</span>
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org78391ce" class="outline-2">
<h2 id="org78391ce">Surround With&#x2026;</h2>
<div class="outline-text-2" id="text-org78391ce">
</div>
<div id="outline-container-org2f927d8" class="outline-3">
<h3 id="org2f927d8">[begin] Code Snippet for BEGIN&#x2026;END block</h3>
<div class="outline-text-3" id="text-org2f927d8">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: Surround <span class="org-keyword">with</span> <span class="org-keyword">BEGIN</span>...
# <span class="org-comment">--</span>
<span class="org-keyword">BEGIN</span>
`yas-selected-<span class="org-type">text</span>`
<span class="org-keyword">END</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org67d3392" class="outline-3">
<h3 id="org67d3392">[if] Code Snippet for IF construct</h3>
<div class="outline-text-3" id="text-org67d3392">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: Surround <span class="org-keyword">with</span> <span class="org-keyword">IF</span>...
# <span class="org-comment">--</span>
<span class="org-keyword">IF</span> (${1:Condition})
<span class="org-keyword">BEGIN</span>

`yas-selected-<span class="org-type">text</span>`

<span class="org-keyword">END</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbcf7313" class="outline-3">
<h3 id="orgbcf7313">[while] Code Snippet for WHILE loop</h3>
<div class="outline-text-3" id="text-orgbcf7313">
<div class="org-src-container">
<pre class="src src-sql"># <span class="org-keyword">name</span>: Surround <span class="org-keyword">with</span> <span class="org-keyword">WHILE</span>...
# <span class="org-comment">--</span>
<span class="org-keyword">WHILE</span> (${1:Condition})
<span class="org-keyword">BEGIN</span>

`yas-selected-<span class="org-type">text</span>`

<span class="org-keyword">END</span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Fabrice Niessen</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
